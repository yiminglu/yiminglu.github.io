(this["webpackJsonpbilling-web-ts"]=this["webpackJsonpbilling-web-ts"]||[]).push([[0],{1255:function(e,t,a){},1256:function(e,t,a){},1257:function(e,t,a){},1258:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(18),r=a.n(s),l=(a(440),a(110),a(33)),i=a(37),o=(a(442),a(9)),m=a.n(o),u=a(419);var d=Object(u.a)((function(){var e=Object(n.useState)({success:!1}),t=Object(i.a)(e,2),a=t[0],c=t[1];return{loginState:a,loginSuccess:function(){return c({success:!0})}}})),g=d.Provider,p=d.useContainer,E=a(7),b=[{type:"Ming",categories:["\u6708\u5de5\u8d44","\u5e74\u7ec8\u5956","\u533b\u4fdd\u5b58\u6298","\u4f4f\u623f\u516c\u79ef\u91d1","\u5176\u4ed6\u85aa\u8d44"]},{type:"Hehe",categories:["\u6708\u5de5\u8d44","\u5e74\u7ec8\u5956","\u5e74\u4e2d\u5956","\u5b63\u5ea6\u5956","\u5e74\u5047\u5956\u91d1","\u533b\u4fdd\u5b58\u6298","\u4f4f\u623f\u516c\u79ef\u91d1","\u589e\u53d1\u7ee9\u6548\u5956","\u62a5\u9500\u4ea4\u901a\u8d39","\u9632\u6691\u964d\u6e29\u8d39","\u62a5\u9500\u7269\u4e1a\u8d39","\u62a5\u9500\u53d6\u6696\u8d39","\u8282\u5047\u65e5\u8865\u52a9","\u751f\u80b2\u6d25\u8d34","\u5176\u4ed6\u85aa\u8d44"]},{type:"Invest",categories:["\u8d27\u5e01\u57fa\u91d1","\u6307\u6570\u57fa\u91d1","\u51fa\u501f\u5229\u606f","\u6570\u5b57\u8d27\u5e01","\u80a1\u7968","P2P"]},{type:"Others",categories:["\u8f6c\u5356\u4e8c\u624b","ME\u7238\u5988","HJ\u7238\u5988","ME\u4eb2\u621a","HJ\u4eb2\u621a","ME\u53cb\u4eba","HJ\u53cb\u4eba"]}],O=["Exclude","Special","Qinghuan","Gift"],f={},h=Object(E.map)(b,(function(e){return f[e.type]=e.categories,e.type})),y=h[0],N=[{type:"\u9910\u996e",categories:["\u5916\u51fa\u996e\u98df","\u95e8\u5e97\u5feb\u9910","\u96f6\u98df\u996e\u6599","\u679c\u852c\u98df\u6750","\u70df\u9152\u8336","\u9910\u996e\u5176\u4ed6"]},{type:"\u4ea4\u901a",categories:["\u6253\u8f66","\u516c\u5171\u4ea4\u901a","\u8f66\u65c5\u8d39\u7528","\u81ea\u9a7e\u52a0\u6cb9","\u81ea\u9a7e\u9ad8\u901f\u8d39","\u81ea\u9a7e\u505c\u8f66","\u81ea\u9a7e\u6d17\u8f66","\u8fdd\u7ae0\u7f5a\u6b3e","\u6c7d\u8f66\u4fdd\u517b","\u6c7d\u8f66\u4fdd\u9669","\u6c7d\u8f66\u7ef4\u4fee","\u6c7d\u8f66\u914d\u4ef6","\u4ea4\u901a\u5176\u4ed6"]},{type:"\u6e05\u6b22",categories:["\u5a03\u513f\u996e\u98df","\u5a03\u513f\u73a9\u5177","\u5a03\u513f\u56fe\u4e66","\u5a03\u513f\u978b\u670d","\u5a03\u513f\u6e38\u4e50\u573a","\u5a03\u513f\u7528\u54c1","\u5a03\u513f\u5b55\u671f","\u5a03\u513f\u5b66\u6742\u8d39","\u5a03\u513f\u5174\u8da3\u73ed","\u5a03\u513f\u8f85\u5bfc\u73ed","\u5a03\u513f\u533b\u836f","\u5a03\u513f\u5176\u4ed6"]},{type:"\u4eb2\u53cb",categories:["\u5bb6\u4eba\u652f\u51fa","\u53cb\u4eba\u652f\u51fa","\u53cb\u4eba\u57ab\u4ed8","\u4eb2\u53cb\u793c\u94b1"]},{type:"\u65e5\u5e38",categories:["\u533b\u7597\u836f\u7269","\u4fdd\u5065\u6309\u6469","\u624b\u673a\u8bdd\u8d39","\u8fd0\u52a8\u5065\u8eab","\u7f8e\u5bb9\u7f8e\u53d1","\u6625\u8282\u5f00\u9500","\u515a\u8d39","\u57ab\u4ed8\u62a5\u9500","\u5de5\u4f5c\u6742\u8d39","\u4fe1\u7528\u5361\u76f8\u5173","\u65e5\u5e38\u5176\u4ed6"]},{type:"\u4f4f\u5bbf",categories:["\u6c34\u8d39","\u7535\u8d39","\u71c3\u6c14\u8d39","\u7269\u4e1a\u8d39","\u5bb6\u7535\u5bb6\u5177","\u7f51\u8d39","\u6709\u7ebf\u7535\u89c6\u8d39","\u5bb6\u5c45\u7528\u54c1","\u5bb6\u653f\u670d\u52a1","\u623f\u79df","\u4f4f\u5bbf\u5176\u4ed6"]},{type:"\u501f\u8d37",categories:["\u6d66\u53d1\u94f6\u884c\u623f\u8d37","\u6d66\u53d1\u94f6\u884c\u6d88\u8d39\u8d37","\u5357\u4eac\u94f6\u884c\u8d37\u6b3e","\u62db\u5546\u94f6\u884c\u95ea\u7535\u8d37","\u5de5\u5546\u94f6\u884c\u8f66\u8d37","\u7406\u8d22\u5e08\u8ba1\u5212"]},{type:"\u8d2d\u7269",categories:["\u4e66\u7c4d\u8d44\u6599","\u7535\u5b503C","\u6e38\u620f\u5145\u503c","\u5e94\u7528\u670d\u52a1","\u5316\u5986\u62a4\u80a4","\u670d\u88c5\u8863\u9970","\u914d\u4ef6\u9970\u54c1","\u5305\u5305\u624b\u8868","\u6536\u85cf","\u8d2d\u7269\u5176\u4ed6"]},{type:"\u5a31\u4e50",categories:["\u6f14\u5531\u4f1a","\u8bdd\u5267","\u7535\u5f71","\u5531\u6b4c","\u6e38\u620f\u5145\u503c","\u5468\u8fb9\u5916\u51fa","\u65c5\u884c\u5f00\u9500","\u5a31\u4e50\u5176\u4ed6"]},{type:"\u7279\u6b8a",categories:["\u7279\u6b8a\u4e8b\u4ef6"]}],j=["Exclude","Special","ME\u7238\u5988","ME\u4eb2\u621a","ME\u53cb\u4eba","HJ\u7238\u5988","HJ\u4eb2\u621a","HJ\u53cb\u4eba","LJY","LSY","VPS","DNS","APP","MUSIC","JD","TB88","DRIVE","100x"],S={},v=Object(E.map)(N,(function(e){return S[e.type]=e.categories,e.type})),A=v[0];a(445);m.a.tz.setDefault("Asia/Shanghai");var T,D,Y=function(){var e=Object(n.useState)("MAIN_PAGE"),t=Object(i.a)(e,2),a=t[0],s=t[1],r=p().loginState.success;return c.a.createElement("div",{className:"App"},c.a.createElement(C,{goBack:r&&"MAIN_PAGE"!==a?function(){s("MAIN_PAGE")}:void 0}),c.a.createElement("div",{className:"content-wrapper"},!r&&c.a.createElement(P,null),r&&"MAIN_PAGE"===a&&c.a.createElement("div",{className:"page-select-area"},c.a.createElement("div",{className:"main-title"},"Welcome!"),c.a.createElement(l.a,{className:"button incomes",type:"primary",onClick:function(){s("INCOMES_PAGE")}},"Incomes"),c.a.createElement(l.a,{className:"button expenses",type:"primary",onClick:function(){s("EXPENSES_PAGE")}},"Expenses"),c.a.createElement(l.a,{className:"button report",type:"primary",onClick:function(){s("REPORT_PAGE")}},"Reports"),c.a.createElement(l.a,{className:"button data-import",type:"primary",onClick:function(){s("DATA_IMPORT_PAGE")}},"Data Import"),c.a.createElement(l.a,{className:"button logout",onClick:function(){document.location.reload()}},"Log Out")),r&&"INCOMES_PAGE"===a&&c.a.createElement(ce,{billingType:"BILLING_TYPE_INCOMES",goBack:function(){s("MAIN_PAGE")}}),r&&"EXPENSES_PAGE"===a&&c.a.createElement(ce,{billingType:"BILLING_TYPE_EXPENSES",goBack:function(){s("MAIN_PAGE")}}),r&&"REPORT_PAGE"===a&&c.a.createElement(ie,{goBack:function(){s("MAIN_PAGE")}}),r&&"DATA_IMPORT_PAGE"===a&&c.a.createElement(Ee,{goBack:function(){s("MAIN_PAGE")}})),c.a.createElement(M,null))},C=(a(492),function(e){var t=e.goBack;return c.a.createElement("header",{id:"header"},c.a.createElement("a",{className:"site-logo",onClick:function(){t?t():document.location.replace("/")}},c.a.createElement("img",{src:"/images/logo/SR-oneline.png",alt:"SeasonsRoad"})))}),M=(a(493),function(){return c.a.createElement("footer",{id:"footer"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"left"},c.a.createElement("span",{className:"item"},c.a.createElement("a",{href:"https://github.com/yiminglu"},c.a.createElement("span",{className:"icon icon--github","aria-hidden":"true"},c.a.createElement("svg",{viewBox:"0 0 16 16"},c.a.createElement("path",{fill:"#828282",d:"M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"}))),c.a.createElement("span",{className:"username"},"yiminglu")))),c.a.createElement("div",{className:"right"},c.a.createElement("span",{className:"item"},"\xa9 SeasonsRoad"))))}),I=(a(137),a(48)),w=(a(162),a(38)),L=a(8),R=a(134),x=a(155),_=a.n(x),k=(a(889),function(){return D});R.b.configure({Auth:{identityPoolId:"us-west-2:70fc8736-5e86-47f3-ab1b-f05b0d93fa2e",region:"us-west-2",userPoolId:"us-west-2_ErwhI1bKS",userPoolWebClientId:"sq9tv2htpaluv4buido7l9eiu",mandatorySignIn:!1,authenticationFlowType:"USER_PASSWORD_AUTH"}});var P=function(){var e=Object(n.useState)({username:"",password:"",status:"NOT_READY"}),t=Object(i.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)({newPassword:"",newPasswordConfirm:"",rstatus:"NOT_READY"}),o=Object(i.a)(r,2),m=o[0],u=o[1],d=a.username,g=a.password,E=a.status,b=m.newPassword,O=m.newPasswordConfirm,f=m.rstatus,h=p().loginSuccess,y=function(){R.a.currentCredentials().then((function(e){_.a.config.update({region:"us-west-2"}),D=new _.a.DynamoDB({apiVersion:"2012-08-10",credentials:R.a.essentialCredentials(e)}),h()}))},N=function(){"READY"===E&&(s(Object(L.a)({},a,{status:"LOADING"})),R.a.signIn({username:d,password:g}).then((function(e){T=e,"NEW_PASSWORD_REQUIRED"===e.challengeName?(w.a.warning({message:"New Password Required!",description:"Welcome, ".concat(e.username,"! You need to set up your new password so that we could begin.")}),s(Object(L.a)({},a,{status:"RESET"}))):"SMS_MFA"!==e.challengeName&&"SOFTWARE_TOKEN_MFA"!==e.challengeName&&"MFA_SETUP"!==e.challengeName?(w.a.success({message:"Login Success!",description:"Welcome back, ".concat(e.username,"!"),duration:3}),y(),s(Object(L.a)({},a,{status:"READY"}))):w.a.warning({message:"Unhandled User status!",description:"Please contact your admin."})})).catch((function(e){w.a.error({message:"Login Failed!",description:""+(e.message||e)}),s(Object(L.a)({},a,{status:"FAILED"}))})))},j=function(){T&&"NEW_PASSWORD_REQUIRED"===T.challengeName&&R.a.completeNewPassword(T,b,{}).then((function(e){T=e,"SMS_MFA"!==e.challengeName&&"SOFTWARE_TOKEN_MFA"!==e.challengeName&&"MFA_SETUP"!==e.challengeName?(w.a.success({message:"Login Success!",description:"Welcome back, ".concat(e.username,"!"),duration:3}),y(),s(Object(L.a)({},a,{status:"READY"}))):w.a.warning({message:"Unhandled User status!",description:"Please contact your admin."})})).catch((function(e){w.a.error({message:"Reset Failed!",description:""+(e.message||e)}),u(Object(L.a)({},m,{rstatus:"FAILED"}))}))};return c.a.createElement("div",{className:"login-container"},c.a.createElement("div",{className:"login-title"},"RESET"!==E?"Billing System":"Reset Password"),"RESET"!==E&&c.a.createElement(I.a,{className:"username-input".concat("FAILED"===E?" error":""),size:"large",onChange:function(e){var t=e.target.value;s(""!==t&&""!==g?Object(L.a)({},a,{username:t,status:"READY"}):Object(L.a)({},a,{username:t,status:"NOT_READY"}))},onPressEnter:N,placeholder:"Input User Name"}),"RESET"!==E&&c.a.createElement(I.a.Password,{className:"password-input".concat("FAILED"===E?" error":""),size:"large",onChange:function(e){var t=e.target.value;s(""!==d&&""!==t?Object(L.a)({},a,{password:t,status:"READY"}):Object(L.a)({},a,{password:t,status:"NOT_READY"}))},onPressEnter:N,placeholder:"Input Password"}),"RESET"!==E&&c.a.createElement(l.a,{className:"login-button",size:"large",type:"primary",disabled:"NOT_READY"===E,loading:"LOADING"===E,onClick:N},"Login"),"RESET"===E&&c.a.createElement(I.a.Password,{className:"password-reset-input",size:"large",onChange:function(e){var t=e.target.value;u(t===O?Object(L.a)({},m,{newPassword:t,rstatus:"READY"}):Object(L.a)({},m,{newPassword:t,rstatus:"NOT_READY"}))},onPressEnter:j,placeholder:"Input New Password"}),"RESET"===E&&c.a.createElement(I.a.Password,{className:"password-reset-confirm-input",size:"large",onChange:function(e){var t=e.target.value;u(b===t?Object(L.a)({},m,{newPasswordConfirm:t,rstatus:"READY"}):Object(L.a)({},m,{newPasswordConfirm:t,rstatus:"NOT_READY"}))},onPressEnter:j,placeholder:"Confirm New Password"}),"RESET"===E&&c.a.createElement(l.a,{className:"reset-button",size:"large",type:"primary",disabled:"NOT_READY"===f,loading:"LOADING"===f,onClick:j},"Reset"))},G=(a(1259),a(195)),F=(a(900),a(273)),B=(a(902),a(274)),H=a(51),z=(a(904),a(196)),V=(a(906),a(17)),W=(a(326),a(53)),U=(a(909),a(430)),q=(a(911),a(271)),J=(a(257),a(132)),K=(a(220),a(64)),Q=(a(327),a(84)),X=(a(1260),a(194)),Z=(a(922),X.a.RangePicker),$=Q.a.CheckableTag,ee=K.a.Option,te=m()().subtract(1,"months").startOf("month"),ae=m()().endOf("month"),ne=function(e){return Boolean(e&&e>m()().endOf("month"))},ce=function(e){var t=e.billingType,a=e.goBack,s="BILLING_TYPE_INCOMES"===t,r=s?"Incomes":"Expenses",o=s?y:A,u=s?"Incomes":"Expenses",d=s?h:v,g=s?O:j,p=s?f:S,T=s?[1/0,0,1e3,1e4]:[1/0,0,100,300,1e3],D=Object(n.useState)(!1),Y=Object(i.a)(D,2),C=Y[0],M=Y[1],R=Object(n.useState)({type:o,start:te,end:ae,categories:[],selectedCategories:[],selectedTags:[],selectMultipleTags:!1,thresholdType:"THRESHOLD_DISABLED",thresholdValue:1/0,sortByAmount:!1,showNumbers:!0}),x=Object(i.a)(R,2),_=x[0],P=x[1],ce=Object(n.useState)({status:"START",list:[]}),se=Object(i.a)(ce,2),re=se[0],le=se[1],ie=Object(n.useState)({type:o,timestamp:-1,creating:!1,updating:!1,deleting:!1,tagsSearch:"",tagsAdding:!1,data:{type:"",timestamp:0,amount:0,category:"",details:"",tags:[]}}),oe=Object(i.a)(ie,2),me=oe[0],ue=oe[1],de=Object(n.useState)(m()().unix()),ge=Object(i.a)(de,2),pe=ge[0],Ee=ge[1],be=_.type,Oe=_.start,fe=_.end,he=_.categories,ye=_.selectedCategories,Ne=_.selectedTags,je=_.selectMultipleTags,Se=_.thresholdType,ve=_.thresholdValue,Ae=_.sortByAmount,Te=_.showNumbers;Object(n.useEffect)((function(){var e={ExpressionAttributeNames:{"#P":"partition","#TS":"timestamp"},ExpressionAttributeValues:{":partition":{S:u},":t1":{N:Oe.unix()+""},":t2":{N:fe.unix()+""}},KeyConditionExpression:"#P = :partition AND #TS BETWEEN :t1 AND :t2",TableName:"BillingV1"};le(Object(L.a)({},re,{status:"LOADING"})),k().query(e,(function(e,t){if(e)console.log(e,e.stack),w.a.error({message:"Query Failed!",description:""+(e.message||e),duration:0}),le(Object(L.a)({},re,{status:"FAILED"}));else{var a=Object(E.map)(t.Items,(function(e){return s?{timestamp:parseInt(e.timestamp.N,10),type:e.type.S,amount:parseFloat(e.amount.N),category:e.category.S,details:e.details?e.details.S:"",tags:Object(E.filter)(e.tags?e.tags.SS:[],(function(e){return""!==e&&" "!==e}))}:{timestamp:parseInt(e.timestamp.N,10),type:e.type.S,amount:parseFloat(e.amount.N),category:e.category.S,merchant:e.merchant.S,merchandise:e.merchandise.S,tags:Object(E.filter)(e.tags?e.tags.SS:[],(function(e){return""!==e&&" "!==e}))}})),n={},c=["! NO TAGs"];Object(E.each)(Object(E.filter)(a,(function(e){return"ALL"===be||e.type===be})),(function(e){n[e.category]||(n[e.category]={count:0,amount:0}),n[e.category].count++,n[e.category].amount+=e.amount,c=Object(E.union)(c,e.tags)}));var r=Object(E.sortBy)(Object(E.map)(n,(function(e,t){return{category:t,count:e.count,amount:e.amount}})),Ae?"amount":"count").reverse();le({status:"SUCCESS",list:a}),P(Object(L.a)({},_,{categories:r,selectedCategories:Object(E.map)(r,(function(e){return e.category})),selectedTags:je?c:[]})),M(!1)}}))}),[Oe,fe,pe]),Object(n.useEffect)((function(){var e={},t=["! NO TAGs"];Object(E.each)(Object(E.filter)(Object(E.filter)(re.list,(function(e){return"ALL"===be||e.type===be})),(function(e){return"THRESHOLD_DISABLED"===Se||"THRESHOLD_LARGER_THAN"===Se&&e.amount>=ve||"THRESHOLD_SMALLER_THAN"===Se&&e.amount<=ve})),(function(a){e[a.category]||(e[a.category]={count:0,amount:0}),e[a.category].count++,e[a.category].amount+=a.amount,t=Object(E.union)(t,a.tags)}));var a=Object(E.sortBy)(Object(E.map)(e,(function(e,t){return{category:t,count:e.count,amount:e.amount}})),Ae?"amount":"count").reverse();P(Object(L.a)({},_,{categories:a,selectedCategories:Object(E.map)(a,(function(e){return e.category})),selectedTags:je?t:[]})),M(!1)}),[be,Se,ve,Ae]);var De=Object(E.filter)(re.list,(function(e){return"THRESHOLD_DISABLED"===Se||"THRESHOLD_LARGER_THAN"===Se&&e.amount>=ve||"THRESHOLD_SMALLER_THAN"===Se&&e.amount<=ve})),Ye=Object(E.filter)(De,(function(e){return("ALL"===be||e.type===be)&&ye.includes(e.category)})),Ce=["! NO TAGs"],Me=Ne.includes("! NO TAGs"),Ie=Object(E.filter)(Ye,(function(e){return Ce=Object(E.union)(Ce,e.tags),!je&&0===Ne.length||Me&&Boolean(!e.tags||!e.tags.length)||Object(E.intersection)(e.tags,Ne).length>0})),we=Ie.length,Le=0,Re=0,xe=0;Object(E.each)(Ie,(function(e){Le+=e.amount,e.tags.includes("Exclude")&&(Re+=1,xe+=e.amount)}));var _e={},ke=0,Pe=0;Object(E.each)(Ye,(function(e){e.tags&&e.tags.length?Object(E.each)(e.tags,(function(t){_e[t]||(_e[t]={count:0,amount:0}),_e[t].count++,_e[t].amount+=e.amount})):(ke++,Pe+=e.amount)}));var Ge=Object(E.sortBy)(Object(E.map)(_e,(function(e,t){return{tag:t,count:e.count,amount:e.amount}})),Ae?"amount":"count").reverse(),Fe=Object(E.find)(Ge,{tag:"Special"}),Be=Object(E.find)(Ge,{tag:"Exclude"}),He=Object(E.filter)(Ge,(function(e){return"Exclude"!==e.tag&&"Special"!==e.tag}));Fe&&He.push(Fe),Be&&He.push(Be);var ze;return Object(n.useEffect)((function(){me.tagsAdding&&ze.focus()}),[me.tagsAdding]),c.a.createElement("div",{className:"billing-container ".concat(s?"incomes":"expenses")},c.a.createElement(J.a,{onBack:function(){a&&a()},title:r}),c.a.createElement(q.a,{checkedChildren:"\u603b\u91cf\u6392\u5e8f",unCheckedChildren:"\u6b21\u6570\u6392\u5e8f",checked:Ae,onChange:function(e){return P(Object(L.a)({},_,{sortByAmount:e}))},className:"sort-by-selector"}),c.a.createElement(U.a,{checked:Te,onChange:function(e){return P(Object(L.a)({},_,{showNumbers:e.target.checked}))},className:"show-number-checkbox"}),c.a.createElement(W.a.Group,{onChange:function(e){P(Object(L.a)({},_,{type:e.target.value}))},defaultValue:o,buttonStyle:"solid",size:"large",className:"type-selector"},Object(E.map)(d,(function(e){return c.a.createElement(W.a.Button,{key:e,value:e},e)})),c.a.createElement(W.a.Button,{value:"ALL"},"ALL")),c.a.createElement(Z,{ranges:{ALL:[m()("20150501","YYYYMMDD"),m()("".concat(m()().year()+(m()().month()<4?0:1)).concat(m()().month()<4?"12":"04","01"),"YYYYMMDD").endOf("month")],"FY19-20":[m()("20190501","YYYYMMDD"),m()("20200401","YYYYMMDD").endOf("month")],"FY18-19":[m()("20180501","YYYYMMDD"),m()("20190401","YYYYMMDD").endOf("month")],"FY17-18":[m()("20170501","YYYYMMDD"),m()("20180401","YYYYMMDD").endOf("month")],"FY16-17":[m()("20160501","YYYYMMDD"),m()("20170401","YYYYMMDD").endOf("month")],"FY15-16":[m()("20150501","YYYYMMDD"),m()("20160401","YYYYMMDD").endOf("month")],Y2020:[m()("20200101","YYYYMMDD"),m()("20200101","YYYYMMDD").endOf("year")],Y2019:[m()("20190101","YYYYMMDD"),m()("20190101","YYYYMMDD").endOf("year")],Y2018:[m()("20180101","YYYYMMDD"),m()("20180101","YYYYMMDD").endOf("year")],Y2017:[m()("20170101","YYYYMMDD"),m()("20170101","YYYYMMDD").endOf("year")],Y2016:[m()("20160101","YYYYMMDD"),m()("20160101","YYYYMMDD").endOf("year")],Y2015:[m()("20150101","YYYYMMDD"),m()("20150101","YYYYMMDD").endOf("year")],"Last 1Y":[m()().subtract(365,"days").startOf("day"),m()().endOf("day")]},defaultValue:[te,ae],disabledDate:ne,onChange:function(e){P(Object(L.a)({},_,{start:Object(E.get)(e,"0"),end:Object(E.get)(e,"1")}))},allowClear:!1,size:"large"}),c.a.createElement("div",{className:"threshold-selector"},c.a.createElement(W.a.Group,{onChange:function(e){return P(Object(L.a)({},_,{thresholdType:e.target.value===1/0?"THRESHOLD_DISABLED":"THRESHOLD_DISABLED"===Se?"THRESHOLD_LARGER_THAN":Se,thresholdValue:e.target.value}))},value:ve,className:"threshold-quick-selector"},Object(E.map)(T,(function(e){return c.a.createElement(W.a.Button,{key:e,value:e},e===1/0?c.a.createElement(V.a,{type:"close-circle"}):e)}))),c.a.createElement("span",{className:"threshold-type-value-container"},"THRESHOLD_DISABLED"!==Se&&c.a.createElement(l.a,{className:"threshold-type",onClick:function(){P(Object(L.a)({},_,{thresholdType:"THRESHOLD_LARGER_THAN"===Se?"THRESHOLD_SMALLER_THAN":"THRESHOLD_LARGER_THAN"}))}},"THRESHOLD_LARGER_THAN"===Se?"\u2265":"\u2264"),"THRESHOLD_DISABLED"!==Se&&c.a.createElement(z.a,{className:"threshold-value",value:ve,onChange:function(e){return P(Object(L.a)({},_,{thresholdValue:void 0===e?0:e}))},step:s?1e3:100,precision:0,style:{width:80}}))),c.a.createElement("div",{className:"categories-selector"},Object(E.map)(he,(function(e){return c.a.createElement($,{key:e.category,checked:Object(E.includes)(ye,e.category),onChange:function(t){P(t?Object(L.a)({},_,{selectedCategories:[].concat(Object(H.a)(ye),[e.category])}):Object(L.a)({},_,{selectedCategories:Object(E.filter)(ye,(function(t){return t!==e.category}))}))}},e.category,Te&&" (".concat(Ae?e.amount.toFixed(0):e.count,")"))})),he.length>0&&0===ye.length&&c.a.createElement(l.a,{type:"primary",size:"small",onClick:function(){P(Object(L.a)({},_,{selectedCategories:Object(E.map)(he,(function(e){return e.category}))}))}},c.a.createElement(V.a,{type:"check-circle"})),he.length>0&&0!==ye.length&&c.a.createElement(l.a,{type:"primary",size:"small",onClick:function(){P(Object(L.a)({},_,{selectedCategories:[]}))}},c.a.createElement(V.a,{type:"close-circle"}))),c.a.createElement("div",{className:"tags-selector"},Object(E.map)(He,(function(e){return c.a.createElement($,{key:e.tag,checked:Ne.includes(e.tag),onChange:function(t){P(t?Object(L.a)({},_,{selectedTags:je?Object(E.union)(Ne,[e.tag]):[e.tag]}):Object(L.a)({},_,{selectedTags:je?Object(E.xor)(Ne,[e.tag]):[]}))}},e.tag,Te&&" (".concat(Ae?e.amount.toFixed(0):e.count,")"))})),ke>0&&c.a.createElement($,{className:"no-tags-tag",checked:Ne.includes("! NO TAGs"),onChange:function(e){P(e?Object(L.a)({},_,{selectedTags:je?Object(E.union)(Ne,["! NO TAGs"]):["! NO TAGs"]}):Object(L.a)({},_,{selectedTags:je?Object(E.xor)(Ne,["! NO TAGs"]):[]}))}},"! NO TAGs",Te&&" (".concat(Ae?Pe.toFixed(0):ke,")")),(!je||0==He.length)&&c.a.createElement("span",{className:"button-toggle-placeholder"}),je&&He.length>0&&0===Ne.length&&c.a.createElement(l.a,{type:"primary",size:"small",onClick:function(){P(Object(L.a)({},_,{selectedTags:Ce}))}},c.a.createElement(V.a,{type:"check-circle"})),je&&He.length>0&&0!==Ne.length&&c.a.createElement(l.a,{type:"primary",size:"small",onClick:function(){P(Object(L.a)({},_,{selectedTags:[]}))}},c.a.createElement(V.a,{type:"close-circle"})),c.a.createElement(q.a,{checkedChildren:"\u591a\u9009",unCheckedChildren:"\u5355\u9009",checked:je,onChange:function(e){return P(Object(L.a)({},_,{selectedTags:e?Ce:[],selectMultipleTags:e}))},className:"multiple-selector-selector"})),c.a.createElement(G.a,{className:"billing-list",header:c.a.createElement("div",{className:"item header"},c.a.createElement("span",{className:"date"},"Date"),c.a.createElement("span",{className:"type"},"Type"),c.a.createElement("span",{className:"category"},"Category"),c.a.createElement("span",{className:"amount"},"Amount"),s&&c.a.createElement("span",{className:"details"},"Details"),s||c.a.createElement("span",{className:"merchant"},"Merchant"),s||c.a.createElement("span",{className:"merchandise"},"Merchandise"),c.a.createElement("span",{className:"tags"},"Tags")),footer:c.a.createElement("div",{className:"billing-list-footer"},c.a.createElement(V.a,{className:"add-new",type:"plus",onClick:function(){ue(Object(L.a)({},me,{timestamp:-1/0,data:s?{type:b[0].type,timestamp:m()().startOf("day").unix(),amount:0,category:b[0].categories[0],details:"",tags:[]}:{type:N[0].type,timestamp:m()().startOf("day").unix(),amount:0,category:N[0].categories[0],merchant:"",merchandise:"",tags:[]}}))}}),c.a.createElement("div",null,we>0&&c.a.createElement("div",null,"Count: ",c.a.createElement("span",{className:"number"},we),Re>0&&c.a.createElement("span",{className:"minus"},"\xa0(-",Re,")"),Re>0&&c.a.createElement("span",{className:"equals"},we-Re)),we>0&&c.a.createElement("div",null,"Average: ",c.a.createElement("span",{className:"number"},"\uffe5",(Le/we).toFixed(2)),Re>0&&c.a.createElement("span",{className:"minus"}),Re>0&&c.a.createElement("span",{className:"equals"},"\uffe5",((Le-xe)/(we-Re)).toFixed(2))),c.a.createElement("div",null,"Total: ",c.a.createElement("span",{className:"number"},"\uffe5",Le.toFixed(2)),Re>0&&c.a.createElement("span",{className:"minus"},"\xa0(-",xe.toFixed(0),")"),Re>0&&c.a.createElement("span",{className:"equals"},"\uffe5",(Le-xe).toFixed(2)))),c.a.createElement(F.a,{title:"Create ".concat(r," Item"),placement:"right",closable:!0,destroyOnClose:!0,width:300,className:"billing-create-drawer",onClose:function(){return ue(Object(L.a)({},me,{timestamp:-1}))},visible:me.timestamp===-1/0},c.a.createElement("div",{className:"DateTime column"},c.a.createElement("span",null,"DateTime"),c.a.createElement("div",null,c.a.createElement(X.a,{allowClear:!1,showTime:!0,value:m.a.unix(me.data.timestamp),onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{timestamp:e?e.unix():m()().startOf("day").unix()})}))},style:{width:"100%"}}))),c.a.createElement("div",{className:"Type column"},c.a.createElement("span",null,"Type"),c.a.createElement("div",null,c.a.createElement(W.a.Group,{value:me.data.type,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{type:e.target.value,category:p[e.target.value][0]})}))},buttonStyle:"solid",className:"type-selector"},Object(E.map)(d,(function(e){return c.a.createElement(W.a.Button,{key:e,value:e},e)}))))),c.a.createElement("div",{className:"Category column"},c.a.createElement("span",null,"Category"),c.a.createElement("div",null,c.a.createElement(K.a,{value:me.data.category,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{category:e})}))},style:{width:"100%"}},Object(E.map)(p[me.data.type],(function(e){return c.a.createElement(ee,{key:e,value:e},e)}))))),c.a.createElement("div",{className:"Amount column"},c.a.createElement("span",null,"Amount"),c.a.createElement("div",null,c.a.createElement(z.a,{value:me.data.amount,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{amount:e||0})}))},step:s?1e3:100,precision:2,style:{width:"100%"}}))),s&&c.a.createElement("div",{className:"Details column"},c.a.createElement("span",null,"Details"),c.a.createElement("div",null,c.a.createElement(I.a,{value:me.data.details,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{details:e.target.value})}))},style:{width:"100%"}}))),s||c.a.createElement("div",{className:"Merchant column"},c.a.createElement("span",null,"Merchant"),c.a.createElement("div",null,c.a.createElement(I.a,{value:me.data.merchant,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{merchant:e.target.value})}))},style:{width:"100%"}}))),s||c.a.createElement("div",{className:"Merchandise column"},c.a.createElement("span",null,"Merchandise"),c.a.createElement("div",null,c.a.createElement(I.a,{value:me.data.merchandise,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{merchandise:e.target.value})}))},style:{width:"100%"}}))),c.a.createElement("div",{className:"Tags column"},c.a.createElement("span",null,"Tags"),c.a.createElement("div",null,Object(E.map)(me.data.tags,(function(e){return c.a.createElement(Q.a,{key:e,closable:!0,onClose:function(){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{tags:Object(E.filter)(me.data.tags,(function(t){return t!==e}))})}))},visible:!0}," ",e," ")})),me.tagsAdding||c.a.createElement(Q.a,{onClick:function(){return ue(Object(L.a)({},me,{tagsSearch:"",tagsAdding:!0}))},style:{background:"#fff",borderStyle:"dashed"}},c.a.createElement(V.a,{type:"plus"}),"NEW_TAG"),me.tagsAdding&&c.a.createElement(B.a,{size:"small",ref:function(e){ze=e},dataSource:[].concat(Object(H.a)(""===me.tagsSearch?[]:[me.tagsSearch]),Object(H.a)(g)),style:{width:250},onSelect:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{tags:[].concat(Object(H.a)(me.data.tags),Object(H.a)(""!==e&&-1===me.data.tags.indexOf(e)?[e]:[]))}),tagsAdding:!1}))},onSearch:function(e){return ue(Object(L.a)({},me,{tagsSearch:e}))},onBlur:function(){return ue(Object(L.a)({},me,{tagsSearch:"",tagsAdding:!1}))},defaultOpen:!0}))),c.a.createElement("div",{className:"buttons"},c.a.createElement(l.a,{type:"primary",style:{width:"100%"},loading:me.creating,onClick:function(){ue(Object(L.a)({},me,{creating:!0}));var e={ExpressionAttributeNames:{"#TS":"timestamp"},Item:{partition:{S:u},timestamp:{N:me.data.timestamp+""},type:{S:me.data.type},category:{S:me.data.category},amount:{N:me.data.amount+""},tags:{S:me.data.tags.join(" ")+" "}},ReturnConsumedCapacity:"TOTAL",TableName:"BillingV1",ConditionExpression:"attribute_not_exists(#TS)"};s?e.Item.details={S:""===me.data.details?" ":me.data.details}:(e.Item.merchant={S:""===me.data.merchant?" ":me.data.merchant},e.Item.merchandise={S:""===me.data.merchandise?" ":me.data.merchandise}),k().putItem(e,(function(e){e?(console.log(e,e.stack),w.a.error({message:"Creation Failed!",description:(e.message||e)+("The conditional request failed"===e.message?"! We should not override exising items. Try a new timestamp.":"!"),duration:0}),ue(Object(L.a)({},me,{creating:!1}))):(w.a.success({message:"Item Created!"}),ue(Object(L.a)({},me,{timestamp:-1,creating:!1})),Ee(m()().unix()))}))}},"Create Item")))),bordered:!0,dataSource:C||we<=50?Ie:[].concat(Object(H.a)(Object(E.slice)(Ie,0,50)),[{timestamp:0,type:"BILLING_ITEMS_TOGGLE_ALL_TYPE",category:"",amount:0,tags:[]}]),renderItem:function(e){return"BILLING_ITEMS_TOGGLE_ALL_TYPE"===e.type?c.a.createElement(G.a.Item,{key:"BILLING_ITEMS_TOGGLE_ALL_TYPE"},c.a.createElement(l.a,{type:"link",style:{width:"100%"},onClick:function(){return M(!0)}},"Toggle All")):c.a.createElement(G.a.Item,{key:e.timestamp},c.a.createElement("div",{className:"item",onClick:function(){return ue({type:e.type,timestamp:e.timestamp,creating:!1,updating:!1,deleting:!1,tagsSearch:"",tagsAdding:!1,data:Object(L.a)({},e,{details:" "===e.details?"":e.details})})}},c.a.createElement("span",{className:"date"},m.a.unix(e.timestamp).format("YYYY-MM-DD")),c.a.createElement("span",{className:"type"},e.type),c.a.createElement("span",{className:"category"},e.category),c.a.createElement("span",{className:"amount"},"\uffe5".concat(e.amount.toFixed(2))),s&&c.a.createElement("span",{className:"details"}," "===e.details?"":e.details),s||c.a.createElement("span",{className:"merchant"}," "===e.merchant?"":e.merchant),s||c.a.createElement("span",{className:"merchandise"}," "===e.merchandise?"":e.merchandise),c.a.createElement("span",{className:"tags"},Object(E.map)(e.tags,(function(e){return c.a.createElement(Q.a,{key:e,closable:!1,visible:!0}," ",e," ")})))),c.a.createElement(F.a,{title:"Edit ".concat(r," Item"),placement:"right",closable:!0,destroyOnClose:!0,width:300,className:"billing-edit-drawer",onClose:function(){return ue(Object(L.a)({},me,{timestamp:-1}))},visible:me.timestamp===e.timestamp},c.a.createElement("div",{className:"DateTime column"},c.a.createElement("span",null,"DateTime"),c.a.createElement("div",null,c.a.createElement(X.a,{showTime:!0,value:m.a.unix(me.data.timestamp),disabled:!0,style:{width:"100%"}}))),c.a.createElement("div",{className:"Type column"},c.a.createElement("span",null,"Type"),c.a.createElement("div",null,c.a.createElement(W.a.Group,{value:me.data.type,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{type:e.target.value,category:d[e.target.value][0]})}))},buttonStyle:"solid",className:"type-selector"},Object(E.map)(d,(function(e){return c.a.createElement(W.a.Button,{key:e,value:e},e)}))))),c.a.createElement("div",{className:"Category column"},c.a.createElement("span",null,"Category"),c.a.createElement("div",null,c.a.createElement(K.a,{value:me.data.category,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{category:e})}))},style:{width:"100%"}},Object(E.map)(p[me.data.type],(function(e){return c.a.createElement(ee,{key:e,value:e},e)}))))),c.a.createElement("div",{className:"Amount column"},c.a.createElement("span",null,"Amount"),c.a.createElement("div",null,c.a.createElement(z.a,{value:me.data.amount,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{amount:e||0})}))},step:1e3,precision:2,style:{width:"100%"}}))),s&&c.a.createElement("div",{className:"Details column"},c.a.createElement("span",null,"Details"),c.a.createElement("div",null,c.a.createElement(I.a,{value:me.data.details,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{details:e.target.value})}))},style:{width:"100%"}}))),s||c.a.createElement("div",{className:"Merchant column"},c.a.createElement("span",null,"Merchant"),c.a.createElement("div",null,c.a.createElement(I.a,{value:me.data.merchant,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{merchant:e.target.value})}))},style:{width:"100%"}}))),s||c.a.createElement("div",{className:"Merchandise column"},c.a.createElement("span",null,"Merchandise"),c.a.createElement("div",null,c.a.createElement(I.a,{value:me.data.merchandise,onChange:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{merchandise:e.target.value})}))},style:{width:"100%"}}))),c.a.createElement("div",{className:"Tags column"},c.a.createElement("span",null,"Tags"),c.a.createElement("div",null,Object(E.map)(me.data.tags,(function(e){return c.a.createElement(Q.a,{key:e,closable:!0,onClose:function(){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{tags:Object(E.filter)(me.data.tags,(function(t){return t!==e}))})}))},visible:!0}," ",e," ")})),me.tagsAdding||c.a.createElement(Q.a,{onClick:function(){return ue(Object(L.a)({},me,{tagsSearch:"",tagsAdding:!0}))},style:{background:"#fff",borderStyle:"dashed"}},c.a.createElement(V.a,{type:"plus"}),"NEW_TAG"),me.tagsAdding&&c.a.createElement(B.a,{size:"small",ref:function(e){ze=e},dataSource:[].concat(Object(H.a)(""===me.tagsSearch?[]:[me.tagsSearch]),Object(H.a)(g)),style:{width:250},onSelect:function(e){return ue(Object(L.a)({},me,{data:Object(L.a)({},me.data,{tags:[].concat(Object(H.a)(me.data.tags),Object(H.a)(""!==e&&-1===me.data.tags.indexOf(e)?[e]:[]))}),tagsAdding:!1}))},onSearch:function(e){return ue(Object(L.a)({},me,{tagsSearch:e}))},onBlur:function(){return ue(Object(L.a)({},me,{tagsSearch:"",tagsAdding:!1}))},defaultOpen:!0}))),c.a.createElement("div",{className:"buttons"},c.a.createElement(l.a,{type:"primary",style:{width:"100%"},disabled:me.deleting,loading:me.updating,onClick:function(){ue(Object(L.a)({},me,{updating:!0}));var e={ExpressionAttributeNames:{"#TP":"type","#CA":"category","#AM":"amount","#TG":"tags"},ExpressionAttributeValues:{":type":{S:me.data.type},":category":{S:me.data.category},":amount":{N:me.data.amount+""},":tags":{SS:[].concat(Object(H.a)(me.data.tags),[" "])}},Key:{partition:{S:u},timestamp:{N:me.timestamp+""}},ReturnValues:"ALL_NEW",TableName:"BillingV1",UpdateExpression:"SET #TP = :type, #CA = :category, #AM = :amount, #DE = :details, #TG = :tags"};s?(e.ExpressionAttributeNames["#DE"]="details",e.ExpressionAttributeValues[":details"]={S:""===me.data.details?" ":me.data.details}):(e.ExpressionAttributeNames["#MCT"]="merchant",e.ExpressionAttributeNames["#MCD"]="merchandise",e.ExpressionAttributeValues[":merchant"]={S:""===me.data.merchant?" ":me.data.merchant},e.ExpressionAttributeValues[":merchandise"]={S:""===me.data.merchandise?" ":me.data.merchandise},e.UpdateExpression="SET #TP = :type, #CA = :category, #AM = :amount, #MCT = :merchant, #MCD = :merchandise, #TG = :tags"),k().updateItem(e,(function(e){e?(console.log(e,e.stack),w.a.error({message:"Update Failed!",description:""+(e.message||e),duration:0}),ue(Object(L.a)({},me,{updating:!1}))):(w.a.success({message:"Item Updated!"}),ue(Object(L.a)({},me,{timestamp:-1,updating:!1})),Ee(m()().unix()))}))}},"Update Item"),c.a.createElement(l.a,{type:"danger",style:{width:"100%"},disabled:me.updating,loading:me.deleting,onClick:function(){ue(Object(L.a)({},me,{deleting:!0}));var e={Key:{partition:{S:u},timestamp:{N:me.timestamp+""}},TableName:"BillingV1"};k().deleteItem(e,(function(e){e?(console.log(e,e.stack),w.a.error({message:"Delete Failed!",description:""+(e.message||e),duration:0}),ue(Object(L.a)({},me,{deleting:!1}))):(w.a.success({message:"Item Deleted!"}),ue(Object(L.a)({},me,{timestamp:-1,deleting:!1})),Ee(m()().unix()))}))}},"Delete Item"))))}}))},se=a(272),re=a.n(se),le=(a(1255),m()("20150501","YYYYMMDD")),ie=function(e){var t,a=Object(n.useState)(window.innerWidth),s=Object(i.a)(a,2),r=s[0],l=s[1],o=Object(n.useState)({status:"START",chartData:{}}),u=Object(i.a)(o,2),d=u[0],g=u[1],p=Object(n.useState)({status:"START",chartData:{}}),b=Object(i.a)(p,2),O=b[0],f=b[1],y=e.goBack,N=le,j=m()(),S=[],A=[];for(t=m()(1e3*N.unix());t<j.endOf("month");t=t.add(1,"month"))S.push(m()(1e3*t.unix())),A.push(t.format("YYYY-MM"));Object(n.useEffect)((function(){Object(E.each)([!0,!1],(function(e){var t=e?g:f,a=e?d:O,n=e?h:v,c={ExpressionAttributeNames:{"#P":"partition","#TS":"timestamp"},ExpressionAttributeValues:{":partition":{S:e?"Incomes":"Expenses"},":t1":{N:N.unix()+""},":t2":{N:j.unix()+""}},KeyConditionExpression:"#P = :partition AND #TS BETWEEN :t1 AND :t2",TableName:"BillingV1"};t(Object(L.a)({},a,{status:"LOADING"})),k().query(c,(function(c,s){if(c)console.log(c,c.stack),w.a.error({message:"Query Failed!",description:""+(c.message||c),duration:0}),t(Object(L.a)({},a,{status:"FAILED"}));else{var r=Object(E.map)(s.Items,(function(t){return e?{timestamp:parseInt(t.timestamp.N,10),type:t.type.S,amount:parseFloat(t.amount.N),category:t.category.S,details:t.details?t.details.S:"",tags:Object(E.filter)(t.tags?t.tags.SS:[],(function(e){return""!==e&&" "!==e}))}:{timestamp:parseInt(t.timestamp.N,10),type:t.type.S,amount:parseFloat(t.amount.N),category:t.category.S,merchant:t.merchant.S,merchandise:t.merchandise.S,tags:Object(E.filter)(t.tags?t.tags.SS:[],(function(e){return""!==e&&" "!==e}))}})),l={};Object(E.each)(n,(function(e){l[e]={}})),Object(E.each)(r,(function(e){var t=m()(1e3*e.timestamp).format("YYYY-MM");l[e.type][t]=l[e.type][t]?l[e.type][t]+e.amount:e.amount}));var i={};Object(E.each)(n,(function(e){i[e]=Object(E.map)(S,(function(t){return l[e][t.format("YYYY-MM")]||0}))})),t({status:"SUCCESS",chartData:i})}}))}))}),[]);var T=Object(E.throttle)((function(){l(window.innerWidth)}),500,{leading:!1});Object(n.useEffect)((function(){return window.addEventListener("resize",T),function(){window.removeEventListener("resize",T)}}),[]);var D=function(e,t){return'<span style="width:150px;display:inline-block;"> <span>'.concat(e,':</span><span style="float:right;">').concat(t.toFixed(2),"</span></span>")},Y=r<768,C=function(e,t,a){return{title:{text:e?"Incomes":"Expenses",textStyle:{fontFamily:'"Open Sans", Helvetica, Arial, sans-serif',fontSize:20,color:"#FFF"}},textStyle:{color:"#FFF"},color:["#ef5350","#ec407a","#ab47bc","#5c6bc0","#03a9f4","#26a69a","#8bc34a","#ffca28","#ff5722","#6e7074"],tooltip:{trigger:"axis",formatter:function(e,t,a){var n=0,c=Object(E.join)(Object(E.map)(e,(function(e){return n+=e.data,D(e.seriesName,e.data)})),"<br />");return"".concat(!!e[0]&&e[0].axisValueLabel,"<br />").concat(c,"<br />").concat(D("\u5171\u8ba1",n))},axisPointer:{type:"shadow"},position:function(e,t,a,n,c){var s={top:120};return s[["left","right"][+(e[0]<c.viewSize[0]/2)]]=5,s},padding:[10,15],backgroundColor:"rgba(50,50,50,0.9)",textStyle:{fontFamily:'Menlo, Monaco, "Courier New", monospace, "Open Sans", Helvetica, Arial, sans-serif'}},legend:{bottom:0,itemGap:20,itemWidth:30,itemHeight:16,textStyle:{color:"#FFF",fontSize:16},selected:{"\u501f\u8d37":!1,"\u5a31\u4e50":!1,"\u7279\u6b8a":!1,Invest:!1,Others:!1},data:t},grid:{top:50,left:10,right:10,bottom:Y?e?50:110:50,containLabel:!0},dataZoom:[{type:"inside",start:Y?100-r/30/S.length*100:0,end:100}],xAxis:[{type:"category",axisLine:{lineStyle:{color:"#ccc"}},data:A}],yAxis:[{type:"value",minInterval:1e3,axisLabel:{formatter:function(e){return"".concat(e/1e3,"k")}},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#444"}}}],series:Object(E.map)(t,(function(e){return{name:e,type:"bar",barMaxWidth:50,data:a[e],stack:"ALL"}}))}};return c.a.createElement("div",{className:"reports-container"},c.a.createElement(J.a,{onBack:function(){y&&y()},title:"Reports"}),c.a.createElement(re.a,{className:"reports incomes",option:C(!0,h,d.chartData),style:{height:400}}),c.a.createElement(re.a,{className:"reports expenses",option:C(!1,v,O.chartData),style:{height:400}}))},oe=a(188),me=(a(1256),I.a.TextArea),ue="NOT_STARTED",de="RUNNING",ge="COMPLETED",pe="FAILED",Ee=function(e){var t=Object(n.useState)({partition:"Incomes",data:""}),a=Object(i.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)({status:ue,total:0,processed:0}),m=Object(i.a)(o,2),u=m[0],d=m[1],g=e.goBack,p=s.partition,b=s.data,O=u.status,f=u.total,h=u.processed;return c.a.createElement("div",{className:"data-import-container"},c.a.createElement(J.a,{onBack:function(){g&&g()},title:"Data Import"}),c.a.createElement(W.a.Group,{onChange:function(e){r(Object(L.a)({},s,{partition:e.target.value}))},value:p,buttonStyle:"solid",size:"large",className:"partition-selector"},c.a.createElement(W.a.Button,{value:"Incomes"},"Incomes"),c.a.createElement(W.a.Button,{value:"Expenses"},"Expenses")),c.a.createElement("div",{className:"input-message"},"Incomes"===p&&"timestamp \\t type \\t category \\t amount \\t details \\t tag1 tag2...","Expenses"===p&&"timestamp \\t type \\t category \\t amount \\t merchant \\t merchandise \\t tag1 tag2..."),c.a.createElement(me,{autoSize:{minRows:5,maxRows:12},value:s.data,className:"data-input",onChange:function(e){r(Object(L.a)({},s,{data:e.target.value}))}}),c.a.createElement("div",{className:"buttons"},c.a.createElement(l.a,{type:"primary",style:{width:"100%"},loading:O===de,size:"large",onClick:function(){var e=Object(E.filter)(b.split("\n"),(function(e){return""!==e})),t=e.length;d({status:de,total:e.length,processed:0});var a=0,n=!1,c=null,s=function(){var s=a+25>t?t:a+25,r={RequestItems:Object(oe.a)({},"BillingV1","Incomes"===p?Object(E.map)(Object(E.slice)(e,a,s),(function(e){if(!n){var t=Object(E.map)(e.split("\t"),(function(e){return e.trim()})),a=Object(i.a)(t,7),c=a[0],s=a[1],r=a[2],l=a[3],o=a[4],m=a[5],u=a[6],d=!!u||""===u;if(d||!m&&""!==m)return w.a.error({message:"Import Failed (".concat(d?"more":"less"," fields in the input)!"),description:"It seems there are ".concat(d?"more":"less"," fields in the input. Please select corect partition to import data."),duration:0}),void(n=!0);var g=Object(E.filter)(m.split(" "),(function(e){return""!==e}));return{PutRequest:{Item:{partition:{S:"Incomes"},timestamp:{N:c},type:{S:s},category:{S:r},amount:{N:l},details:{S:""===o?" ":o},tags:{SS:[].concat(Object(H.a)(g),[" "])}}}}}})):Object(E.map)(Object(E.slice)(e,a,s),(function(e){if(!n){var t=Object(E.map)(e.split("\t"),(function(e){return e.trim()})),a=Object(i.a)(t,8),c=a[0],s=a[1],r=a[2],l=a[3],o=a[4],m=a[5],u=a[6],d=a[7],g=!!d||""===d;if(g||!u&&""!==u)return w.a.error({message:"Import Failed (".concat(g?"more":"less"," fields in the input)!"),description:"It seems there are ".concat(g?"more":"less"," fields in the input. Please select corect partition to import data."),duration:0}),void(n=!0);var p=Object(E.filter)(u.split(" "),(function(e){return""!==e}));return{PutRequest:{Item:{partition:{S:"Expenses"},timestamp:{N:c},type:{S:s},category:{S:r},amount:{N:l},merchant:{S:""===o?" ":o},merchandise:{S:""===m?" ":m},tags:{SS:[].concat(Object(H.a)(p),[" "])}}}}}}))),ReturnConsumedCapacity:"TOTAL"};if(n)return c&&clearInterval(c),void d({status:pe,total:e.length,processed:s});k().batchWriteItem(r,(function(n){if(n)console.log(n,n.stack),w.a.error({message:"Import Failed (".concat(a," -> ").concat(s,")!"),description:""+(n.message||n),duration:0}),c&&clearInterval(c),d({status:pe,total:e.length,processed:s});else{if(s===t)return d({status:ge,total:e.length,processed:s}),void(c&&clearInterval(c));d({status:de,total:e.length,processed:s}),a=s}}))};s(),c=setInterval(s,1e3)}},"Import Items"),c.a.createElement("div",{className:"status-message"},O===de&&"Processing: ".concat(h," of ").concat(f,"..."),O===ge&&"Completed!",O===pe&&"Failed!")))},be=(a(1257),function(){return c.a.createElement(g,null,c.a.createElement(Y,null))});r.a.render(c.a.createElement(be,null),document.getElementById("root"))},217:function(e,t){},435:function(e,t,a){e.exports=a(1258)},440:function(e,t,a){},445:function(e,t,a){},492:function(e,t,a){},493:function(e,t,a){},889:function(e,t,a){},922:function(e,t,a){}},[[435,1,2]]]);
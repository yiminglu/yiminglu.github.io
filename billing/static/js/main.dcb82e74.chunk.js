(this["webpackJsonpbilling-web-ts"]=this["webpackJsonpbilling-web-ts"]||[]).push([[0],{128:function(e,a){},225:function(e,a,t){e.exports=t(735)},230:function(e,a,t){},235:function(e,a,t){},282:function(e,a,t){},283:function(e,a,t){},679:function(e,a,t){},706:function(e,a,t){},733:function(e,a,t){},734:function(e,a,t){},735:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),c=t(13),l=t.n(c),r=(t(230),t(65),t(26)),o=t(31),i=(t(232),t(7)),m=t.n(i),u=t(210);var d=Object(u.a)((function(){var e=Object(n.useState)({success:!1}),a=Object(o.a)(e,2),t=a[0],s=a[1];return{loginState:t,loginSuccess:function(){return s({success:!0})}}})),E=d.Provider,g=d.useContainer;t(235);m.a.tz.setDefault("Asia/Shanghai");var p,b,v=function(){var e=Object(n.useState)("MAIN_PAGE"),a=Object(o.a)(e,2),t=a[0],c=a[1],l=g().loginState.success;return s.a.createElement("div",{className:"App"},s.a.createElement(h,null),s.a.createElement("div",{className:"content-wrapper"},!l&&s.a.createElement(C,null),l&&"MAIN_PAGE"===t&&s.a.createElement("div",{className:"page-select-area"},s.a.createElement("div",{className:"main-title"},"Welcome!"),s.a.createElement(r.a,{className:"button salary",type:"primary",onClick:function(){c("SALARY_PAGE")}},"Salary"),s.a.createElement(r.a,{className:"button expenses",type:"primary",onClick:function(){c("EXPENSES_PAGE")},disabled:!0},"Expenses (TBD)"),s.a.createElement(r.a,{className:"button investment",type:"primary",onClick:function(){c("INVESTMENT_PAGE")},disabled:!0},"Investment (TBD)"),s.a.createElement(r.a,{className:"button data-import",type:"primary",onClick:function(){c("DATA_IMPORT_PAGE")}},"Data Import"),s.a.createElement(r.a,{className:"button logout",onClick:function(){document.location.reload()}},"Log Out")),l&&"SALARY_PAGE"===t&&s.a.createElement(V,{goBack:function(){c("MAIN_PAGE")}}),l&&"EXPENSE_PAGE"===t&&s.a.createElement("div",null,"TBD"),l&&"INVESTMENT_PAGE"===t&&s.a.createElement("div",null,"TBD"),l&&"DATA_IMPORT_PAGE"===t&&s.a.createElement(Z,{goBack:function(){c("MAIN_PAGE")}})),s.a.createElement(O,null))},h=(t(282),function(){return s.a.createElement("header",{id:"header"},s.a.createElement("a",{className:"site-logo",href:"/"},s.a.createElement("img",{src:"/images/logo/SR-oneline.png",alt:"SeasonsRoad"})))}),O=(t(283),function(){return s.a.createElement("footer",{id:"footer"},s.a.createElement("div",{className:"wrapper"},s.a.createElement("div",{className:"left"},s.a.createElement("span",{className:"item"},s.a.createElement("a",{href:"https://github.com/yiminglu"},s.a.createElement("span",{className:"icon icon--github","aria-hidden":"true"},s.a.createElement("svg",{viewBox:"0 0 16 16"},s.a.createElement("path",{fill:"#828282",d:"M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"}))),s.a.createElement("span",{className:"username"},"yiminglu")))),s.a.createElement("div",{className:"right"},s.a.createElement("span",{className:"item"},"\xa9 SeasonsRoad"))))}),y=(t(88),t(50)),N=(t(122),t(27)),f=t(15),w=t(76),S=t(82),j=t.n(S),A=(t(679),function(){return b});w.b.configure({Auth:{identityPoolId:"us-west-2:70fc8736-5e86-47f3-ab1b-f05b0d93fa2e",region:"us-west-2",userPoolId:"us-west-2_ErwhI1bKS",userPoolWebClientId:"sq9tv2htpaluv4buido7l9eiu",mandatorySignIn:!1,authenticationFlowType:"USER_PASSWORD_AUTH"}});var C=function(){var e=Object(n.useState)({username:"",password:"",status:"NOT_READY"}),a=Object(o.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)({newPassword:"",newPasswordConfirm:"",rstatus:"NOT_READY"}),i=Object(o.a)(l,2),m=i[0],u=i[1],d=t.username,E=t.password,v=t.status,h=m.newPassword,O=m.newPasswordConfirm,S=m.rstatus,A=g().loginSuccess,C=function(){w.a.currentCredentials().then((function(e){j.a.config.update({region:"us-west-2"}),b=new j.a.DynamoDB({apiVersion:"2012-08-10",credentials:w.a.essentialCredentials(e)}),A()}))},D=function(){"READY"===v&&(c(Object(f.a)({},t,{status:"LOADING"})),w.a.signIn({username:d,password:E}).then((function(e){p=e,"NEW_PASSWORD_REQUIRED"===e.challengeName?(N.a.warning({message:"New Password Required!",description:"Welcome, ".concat(e.username,"! You need to set up your new password so that we could begin.")}),c(Object(f.a)({},t,{status:"RESET"}))):"SMS_MFA"!==e.challengeName&&"SOFTWARE_TOKEN_MFA"!==e.challengeName&&"MFA_SETUP"!==e.challengeName?(N.a.success({message:"Login Success!",description:"Welcome back, ".concat(e.username,"!"),duration:3}),C(),c(Object(f.a)({},t,{status:"READY"}))):N.a.warning({message:"Unhandled User status!",description:"Please contact your admin."})})).catch((function(e){N.a.error({message:"Login Failed!",description:""+(e.message||e)}),c(Object(f.a)({},t,{status:"FAILED"}))})))},T=function(){p&&"NEW_PASSWORD_REQUIRED"===p.challengeName&&w.a.completeNewPassword(p,h,{}).then((function(e){p=e,"SMS_MFA"!==e.challengeName&&"SOFTWARE_TOKEN_MFA"!==e.challengeName&&"MFA_SETUP"!==e.challengeName?(N.a.success({message:"Login Success!",description:"Welcome back, ".concat(e.username,"!"),duration:3}),C(),c(Object(f.a)({},t,{status:"READY"}))):N.a.warning({message:"Unhandled User status!",description:"Please contact your admin."})})).catch((function(e){N.a.error({message:"Reset Failed!",description:""+(e.message||e)}),u(Object(f.a)({},m,{rstatus:"FAILED"}))}))};return s.a.createElement("div",{className:"login-container"},s.a.createElement("div",{className:"login-title"},"RESET"!==v?"Billing System":"Reset Password"),"RESET"!==v&&s.a.createElement(y.a,{className:"username-input".concat("FAILED"===v?" error":""),size:"large",onChange:function(e){var a=e.target.value;c(""!==a&&""!==E?Object(f.a)({},t,{username:a,status:"READY"}):Object(f.a)({},t,{username:a,status:"NOT_READY"}))},onPressEnter:D,placeholder:"Input User Name"}),"RESET"!==v&&s.a.createElement(y.a.Password,{className:"password-input".concat("FAILED"===v?" error":""),size:"large",onChange:function(e){var a=e.target.value;c(""!==d&&""!==a?Object(f.a)({},t,{password:a,status:"READY"}):Object(f.a)({},t,{password:a,status:"NOT_READY"}))},onPressEnter:D,placeholder:"Input Password"}),"RESET"!==v&&s.a.createElement(r.a,{className:"login-button",size:"large",type:"primary",disabled:"NOT_READY"===v,loading:"LOADING"===v,onClick:D},"Login"),"RESET"===v&&s.a.createElement(y.a.Password,{className:"password-reset-input",size:"large",onChange:function(e){var a=e.target.value;u(a===O?Object(f.a)({},m,{newPassword:a,rstatus:"READY"}):Object(f.a)({},m,{newPassword:a,rstatus:"NOT_READY"}))},onPressEnter:T,placeholder:"Input New Password"}),"RESET"===v&&s.a.createElement(y.a.Password,{className:"password-reset-confirm-input",size:"large",onChange:function(e){var a=e.target.value;u(h===a?Object(f.a)({},m,{newPasswordConfirm:a,rstatus:"READY"}):Object(f.a)({},m,{newPasswordConfirm:a,rstatus:"NOT_READY"}))},onPressEnter:T,placeholder:"Confirm New Password"}),"RESET"===v&&s.a.createElement(r.a,{className:"reset-button",size:"large",type:"primary",disabled:"NOT_READY"===S,loading:"LOADING"===S,onClick:T},"Reset"))},D=(t(736),t(145)),T=(t(690),t(146)),I=(t(692),t(147)),R=(t(694),t(12)),P=t(220),Y=(t(200),t(37)),_=(t(209),t(102)),M=(t(199),t(53)),k=(t(201),t(103)),x=(t(737),t(105)),F=t(19),L=(t(706),x.a.RangePicker),B=k.a.CheckableTag,G=M.a.Option,W=m()().subtract(30,"days").startOf("day"),U=m()().endOf("day"),z=function(e){return Boolean(e&&e>m()().endOf("day"))},V=function(e){var a=Object(n.useState)({who:"Ming",start:W,end:U,selection:[]}),t=Object(o.a)(a,2),c=t[0],l=t[1],i=Object(n.useState)({status:"START",list:[],categories:[]}),u=Object(o.a)(i,2),d=u[0],E=u[1],g=Object(n.useState)({who:"Ming",timestamp:-1,creating:!1,updating:!1,deleting:!1,data:{who:"",timestamp:0,amount:0,category:"",details:""}}),p=Object(o.a)(g,2),b=p[0],v=p[1],h=Object(n.useState)(m()().unix()),O=Object(o.a)(h,2),w=O[0],S=O[1],j=c.who,C=c.start,k=c.end,V=c.selection;Object(n.useEffect)((function(){var e={ExpressionAttributeNames:{"#TS":"timestamp"},ExpressionAttributeValues:{":who":{S:j},":t1":{N:C.unix()+""},":t2":{N:k.unix()+""}},KeyConditionExpression:"who = :who AND #TS BETWEEN :t1 AND :t2",TableName:"Salary"};E(Object(f.a)({},d,{status:"LOADING"})),A().query(e,(function(e,a){if(e)console.log(e,e.stack),N.a.error({message:"Query Failed!",description:""+(e.message||e),duration:0}),E(Object(f.a)({},d,{status:"FAILED"}));else{var t=Object(F.map)(a.Items,(function(e){return{timestamp:parseInt(e.timestamp.N,10),who:e.who.S,amount:parseFloat(e.amount.N),category:e.category.S,details:e.details?e.details.S:""}})),n={};Object(F.each)(t,(function(e){n[e.category]=n[e.category]?n[e.category]+1:1}));var s=Object(F.sortBy)(Object(F.map)(n,(function(e,a){return{category:a,count:e}})),"count").reverse();E({status:"SUCCESS",list:t,categories:s}),l(Object(f.a)({},c,{selection:Object(F.map)(s,(function(e){return e.category}))}))}}))}),[j,C,k,w]);var q=Object(F.filter)(d.list,(function(e){return V.includes(e.category)})),K=q.length,H=0;Object(F.each)(q,(function(e){H+=e.amount}));return s.a.createElement("div",{className:"salary-container"},s.a.createElement(_.a,{onBack:function(){e.goBack()},title:"Salary"}),s.a.createElement(Y.a.Group,{onChange:function(e){l(Object(f.a)({},c,{who:e.target.value}))},defaultValue:"Ming",buttonStyle:"solid",size:"large",className:"who-selector"},s.a.createElement(Y.a.Button,{value:"Ming"},"Ming"),s.a.createElement(Y.a.Button,{value:"Hehe"},"Hehe")),s.a.createElement(L,{ranges:{"This Fiscal Year":[m()("".concat(m()().year()-(m()().month()<4?1:0),"0501"),"YYYYMMDD"),m()("".concat(m()().year()+(m()().month()<4?0:1),"0401"),"YYYYMMDD").endOf("month")],"Last Fiscal Year":[m()("".concat(m()().year()-(m()().month()<4?2:1),"0501"),"YYYYMMDD"),m()("".concat(m()().year()-(m()().month()<4?1:0),"0401"),"YYYYMMDD").endOf("month")],"Last 365 Days":[m()().subtract(365,"days").startOf("day"),m()().endOf("day")],"This Year":[m()().startOf("year"),m()().endOf("year")],"Last Year":[m()().subtract(1,"year").startOf("year"),m()().subtract(1,"year").endOf("year")]},defaultValue:[W,U],disabledDate:z,onChange:function(e){l(Object(f.a)({},c,{start:Object(F.get)(e,"0"),end:Object(F.get)(e,"1")}))},allowClear:!1,size:"large"}),s.a.createElement("div",{className:"categories"},Object(F.map)(d.categories,(function(e){return s.a.createElement(B,{key:e.category,checked:Object(F.includes)(V,e.category),onChange:function(a){l(a?Object(f.a)({},c,{selection:[].concat(Object(P.a)(V),[e.category])}):Object(f.a)({},c,{selection:Object(F.filter)(V,(function(a){return a!==e.category}))}))}},e.category," (",e.count,")")}))),s.a.createElement(D.a,{className:"salary-list",header:s.a.createElement("div",{className:"item header"},s.a.createElement("span",{className:"date"},"Date"),s.a.createElement("span",{className:"who"},"Who"),s.a.createElement("span",{className:"amount"},"Amount"),s.a.createElement("span",{className:"category"},"Category"),s.a.createElement("span",{className:"details"},"Details")),footer:s.a.createElement("div",{className:"salary-list-footer"},s.a.createElement(R.a,{className:"add-new",type:"plus",onClick:function(){v(Object(f.a)({},b,{timestamp:-1/0,data:{who:"Ming",timestamp:m()().startOf("day").unix(),amount:0,category:"\u6708\u5de5\u8d44",details:""}}))}}),K>0&&s.a.createElement("span",null,"Count: ",K),K>0&&s.a.createElement("span",null,"Average: \uffe5",(H/K).toFixed(2)),s.a.createElement("span",null,"Total: \uffe5",H.toFixed(2)),s.a.createElement(T.a,{title:"Create Salary Item",placement:"right",closable:!0,destroyOnClose:!0,width:300,className:"salary-create-drawer",onClose:function(){return v(Object(f.a)({},b,{timestamp:-1}))},visible:b.timestamp===-1/0},s.a.createElement("div",{className:"DateTime column"},s.a.createElement("span",null,"DateTime"),s.a.createElement("div",null,s.a.createElement(x.a,{allowClear:!1,showTime:!0,value:m.a.unix(b.data.timestamp),onChange:function(e){return v(Object(f.a)({},b,{data:Object(f.a)({},b.data,{timestamp:e?e.unix():m()().startOf("day").unix()})}))},style:{width:"100%"}}))),s.a.createElement("div",{className:"Who column"},s.a.createElement("span",null,"Who"),s.a.createElement("div",null,s.a.createElement(Y.a.Group,{value:b.data.who,onChange:function(e){return v(Object(f.a)({},b,{data:Object(f.a)({},b.data,{who:e.target.value})}))},buttonStyle:"solid",className:"who-selector"},s.a.createElement(Y.a.Button,{value:"Ming"},"Ming"),s.a.createElement(Y.a.Button,{value:"Hehe"},"Hehe")))),s.a.createElement("div",{className:"Amount column"},s.a.createElement("span",null,"Amount"),s.a.createElement("div",null,s.a.createElement(I.a,{value:b.data.amount,onChange:function(e){return v(Object(f.a)({},b,{data:Object(f.a)({},b.data,{amount:e||0})}))},min:0,step:1e3,precision:2,style:{width:"100%"}}))),s.a.createElement("div",{className:"Category column"},s.a.createElement("span",null,"Category"),s.a.createElement("div",null,s.a.createElement(M.a,{value:b.data.category,onChange:function(e){return v(Object(f.a)({},b,{data:Object(f.a)({},b.data,{category:e})}))},style:{width:"100%"}},s.a.createElement(G,{value:"\u6708\u5de5\u8d44"},"\u6708\u5de5\u8d44"),s.a.createElement(G,{value:"\u5e74\u7ec8\u5956"},"\u5e74\u7ec8\u5956"),s.a.createElement(G,{value:"\u5e74\u4e2d\u5956"},"\u5e74\u4e2d\u5956"),s.a.createElement(G,{value:"\u5b63\u5ea6\u5956"},"\u5b63\u5ea6\u5956"),s.a.createElement(G,{value:"\u5e74\u5047\u5956\u91d1"},"\u5e74\u5047\u5956\u91d1"),s.a.createElement(G,{value:"\u533b\u4fdd\u5b58\u6298"},"\u533b\u4fdd\u5b58\u6298"),s.a.createElement(G,{value:"\u4f4f\u623f\u516c\u79ef\u91d1"},"\u4f4f\u623f\u516c\u79ef\u91d1"),s.a.createElement(G,{value:"\u589e\u53d1\u7ee9\u6548\u5956"},"\u589e\u53d1\u7ee9\u6548\u5956"),s.a.createElement(G,{value:"\u62a5\u9500\u4ea4\u901a\u8d39"},"\u62a5\u9500\u4ea4\u901a\u8d39"),s.a.createElement(G,{value:"\u9632\u6691\u964d\u6e29\u8d39"},"\u9632\u6691\u964d\u6e29\u8d39"),s.a.createElement(G,{value:"\u62a5\u9500\u7269\u4e1a\u8d39"},"\u62a5\u9500\u7269\u4e1a\u8d39"),s.a.createElement(G,{value:"\u62a5\u9500\u53d6\u6696\u8d39"},"\u62a5\u9500\u53d6\u6696\u8d39"),s.a.createElement(G,{value:"\u8282\u5047\u65e5\u8865\u52a9"},"\u8282\u5047\u65e5\u8865\u52a9"),s.a.createElement(G,{value:"\u751f\u80b2\u6d25\u8d34"},"\u751f\u80b2\u6d25\u8d34"),s.a.createElement(G,{value:"\u5176\u4ed6"},"\u5176\u4ed6")))),s.a.createElement("div",{className:"Details column"},s.a.createElement("span",null,"Details"),s.a.createElement("div",null,s.a.createElement(y.a,{value:b.data.details,onChange:function(e){return v(Object(f.a)({},b,{data:Object(f.a)({},b.data,{details:e.target.value})}))},style:{width:"100%"}}))),s.a.createElement("div",{className:"buttons"},s.a.createElement(r.a,{type:"primary",style:{width:"100%"},loading:b.creating,onClick:function(){v(Object(f.a)({},b,{creating:!0}));var e={ExpressionAttributeNames:{"#TS":"timestamp"},Item:{who:{S:b.data.who},timestamp:{N:b.data.timestamp+""},amount:{N:b.data.amount+""},category:{S:b.data.category},details:{S:""===b.data.details?" ":b.data.details}},ReturnConsumedCapacity:"TOTAL",TableName:"Salary",ConditionExpression:"attribute_not_exists(#TS)"};A().putItem(e,(function(e){e?(console.log(e,e.stack),N.a.error({message:"Creation Failed!",description:(e.message||e)+("The conditional request failed"===e.message?"! We should not override exising items. Try a new timestamp.":"!"),duration:0}),v(Object(f.a)({},b,{creating:!1}))):(N.a.success({message:"Item Created!"}),v(Object(f.a)({},b,{timestamp:-1,creating:!1})),S(m()().unix()))}))}},"Create Item")))),bordered:!0,dataSource:q,renderItem:function(e){return s.a.createElement(D.a.Item,{key:e.timestamp},s.a.createElement("div",{className:"item",onClick:function(){return v({who:e.who,timestamp:e.timestamp,creating:!1,updating:!1,deleting:!1,data:Object(f.a)({},e,{details:" "===e.details?"":e.details})})}},s.a.createElement("span",{className:"date"},m.a.unix(e.timestamp).format("YYYY-MM-DD")),s.a.createElement("span",{className:"who"},e.who),s.a.createElement("span",{className:"amount"},"\uffe5".concat(e.amount.toFixed(2))),s.a.createElement("span",{className:"category"},e.category),s.a.createElement("span",{className:"details"}," "===e.details?"":e.details)),s.a.createElement(T.a,{title:"Edit Salary Item",placement:"right",closable:!0,destroyOnClose:!0,width:300,className:"salary-edit-drawer",onClose:function(){return v(Object(f.a)({},b,{timestamp:-1}))},visible:b.timestamp===e.timestamp},s.a.createElement("div",{className:"DateTime column"},s.a.createElement("span",null,"DateTime"),s.a.createElement("div",null,s.a.createElement(x.a,{showTime:!0,value:m.a.unix(b.data.timestamp),disabled:!0,style:{width:"100%"}}))),s.a.createElement("div",{className:"Who column"},s.a.createElement("span",null,"Who"),s.a.createElement("div",null,s.a.createElement(Y.a.Group,{value:b.data.who,buttonStyle:"solid",className:"who-selector"},s.a.createElement(Y.a.Button,{value:b.data.who},b.data.who)))),s.a.createElement("div",{className:"Amount column"},s.a.createElement("span",null,"Amount"),s.a.createElement("div",null,s.a.createElement(I.a,{value:b.data.amount,onChange:function(e){return v(Object(f.a)({},b,{data:Object(f.a)({},b.data,{amount:e||0})}))},min:0,step:1e3,precision:2,style:{width:"100%"}}))),s.a.createElement("div",{className:"Category column"},s.a.createElement("span",null,"Category"),s.a.createElement("div",null,s.a.createElement(M.a,{value:b.data.category,onChange:function(e){return v(Object(f.a)({},b,{data:Object(f.a)({},b.data,{category:e})}))},style:{width:"100%"}},s.a.createElement(G,{value:"\u6708\u5de5\u8d44"},"\u6708\u5de5\u8d44"),s.a.createElement(G,{value:"\u5e74\u7ec8\u5956"},"\u5e74\u7ec8\u5956"),s.a.createElement(G,{value:"\u5e74\u4e2d\u5956"},"\u5e74\u4e2d\u5956"),s.a.createElement(G,{value:"\u5b63\u5ea6\u5956"},"\u5b63\u5ea6\u5956"),s.a.createElement(G,{value:"\u5e74\u5047\u5956\u91d1"},"\u5e74\u5047\u5956\u91d1"),s.a.createElement(G,{value:"\u533b\u4fdd\u5b58\u6298"},"\u533b\u4fdd\u5b58\u6298"),s.a.createElement(G,{value:"\u4f4f\u623f\u516c\u79ef\u91d1"},"\u4f4f\u623f\u516c\u79ef\u91d1"),s.a.createElement(G,{value:"\u589e\u53d1\u7ee9\u6548\u5956"},"\u589e\u53d1\u7ee9\u6548\u5956"),s.a.createElement(G,{value:"\u62a5\u9500\u4ea4\u901a\u8d39"},"\u62a5\u9500\u4ea4\u901a\u8d39"),s.a.createElement(G,{value:"\u9632\u6691\u964d\u6e29\u8d39"},"\u9632\u6691\u964d\u6e29\u8d39"),s.a.createElement(G,{value:"\u62a5\u9500\u7269\u4e1a\u8d39"},"\u62a5\u9500\u7269\u4e1a\u8d39"),s.a.createElement(G,{value:"\u62a5\u9500\u53d6\u6696\u8d39"},"\u62a5\u9500\u53d6\u6696\u8d39"),s.a.createElement(G,{value:"\u8282\u5047\u65e5\u8865\u52a9"},"\u8282\u5047\u65e5\u8865\u52a9"),s.a.createElement(G,{value:"\u751f\u80b2\u6d25\u8d34"},"\u751f\u80b2\u6d25\u8d34"),s.a.createElement(G,{value:"\u5176\u4ed6"},"\u5176\u4ed6")))),s.a.createElement("div",{className:"Details column"},s.a.createElement("span",null,"Details"),s.a.createElement("div",null,s.a.createElement(y.a,{value:b.data.details,onChange:function(e){return v(Object(f.a)({},b,{data:Object(f.a)({},b.data,{details:e.target.value})}))},style:{width:"100%"}}))),s.a.createElement("div",{className:"buttons"},s.a.createElement(r.a,{type:"primary",style:{width:"100%"},disabled:b.deleting,loading:b.updating,onClick:function(){v(Object(f.a)({},b,{updating:!0}));var e={ExpressionAttributeNames:{"#AM":"amount","#CA":"category","#DE":"details"},ExpressionAttributeValues:{":amount":{N:b.data.amount+""},":category":{S:b.data.category},":details":{S:""===b.data.details?" ":b.data.details}},Key:{who:{S:b.who},timestamp:{N:b.timestamp+""}},ReturnValues:"ALL_NEW",TableName:"Salary",UpdateExpression:"SET #AM = :amount, #CA = :category, #DE = :details"};A().updateItem(e,(function(e){e?(console.log(e,e.stack),N.a.error({message:"Update Failed!",description:""+(e.message||e),duration:0}),v(Object(f.a)({},b,{updating:!1}))):(N.a.success({message:"Item Updated!"}),v(Object(f.a)({},b,{timestamp:-1,updating:!1})),S(m()().unix()))}))}},"Update Item"),s.a.createElement(r.a,{type:"danger",style:{width:"100%"},disabled:b.updating,loading:b.deleting,onClick:function(){v(Object(f.a)({},b,{deleting:!0}));var e={Key:{who:{S:b.who},timestamp:{N:b.timestamp+""}},TableName:"Salary"};A().deleteItem(e,(function(e){e?(console.log(e,e.stack),N.a.error({message:"Delete Failed!",description:""+(e.message||e),duration:0}),v(Object(f.a)({},b,{deleting:!1}))):(N.a.success({message:"Item Deleted!"}),v(Object(f.a)({},b,{timestamp:-1,deleting:!1})),S(m()().unix()))}))}},"Delete Item"))))}}))},q=t(97),K=(t(733),y.a.TextArea),H="NOT_STARTED",Q="RUNNING",J="COMPLETED",X="FAILED",Z=function(e){var a=Object(n.useState)({table:"Salary",data:""}),t=Object(o.a)(a,2),c=t[0],l=t[1],i=Object(n.useState)({status:H,total:0,processed:0}),m=Object(o.a)(i,2),u=m[0],d=m[1],E=c.table,g=c.data,p=u.status,b=u.total,v=u.processed;return s.a.createElement("div",{className:"data-import-container"},s.a.createElement(_.a,{onBack:function(){e.goBack()},title:"Data Import"}),s.a.createElement(Y.a.Group,{onChange:function(e){l(Object(f.a)({},c,{table:e.target.value}))},value:E,buttonStyle:"solid",size:"large",className:"table-selector"},s.a.createElement(Y.a.Button,{value:"Salary"},"Salary"),s.a.createElement(Y.a.Button,{value:"Expenses",disabled:!0},"Expenses")),s.a.createElement("div",{className:"input-message"},"Salary"===E&&"who \\t timestamp \\t amount \\t category \\t details"),s.a.createElement(K,{autoSize:{minRows:5,maxRows:12},value:c.data,className:"data-input",onChange:function(e){l(Object(f.a)({},c,{data:e.target.value}))}}),s.a.createElement("div",{className:"buttons"},s.a.createElement(r.a,{type:"primary",style:{width:"100%"},loading:p===Q,size:"large",onClick:function(){var e=Object(F.filter)(g.split("\n"),(function(e){return""!==e})),a=e.length;d({status:Q,total:e.length,processed:0});var t=0,n=setInterval((function(){var s=t+25>a?a:t+25,c={RequestItems:Object(q.a)({},E,Object(F.map)(Object(F.slice)(e,t,s),(function(e){var a=e.split("\t"),t=Object(o.a)(a,5),n=t[0],s=t[1],c=t[2],l=t[3],r=t[4];return{PutRequest:{Item:{who:{S:n},timestamp:{N:s},amount:{N:c},category:{S:l},details:{S:""===r?" ":r}}}}}))),ReturnConsumedCapacity:"TOTAL"};A().batchWriteItem(c,(function(c){if(c)console.log(c,c.stack),N.a.error({message:"Import Failed (".concat(t," -> ").concat(s,")!"),description:""+(c.message||c),duration:0}),clearInterval(n),d({status:X,total:e.length,processed:s});else{if(s===a)return d({status:J,total:e.length,processed:s}),void clearInterval(n);d({status:Q,total:e.length,processed:s}),t=s}}))}),1e3)}},"Import Items"),s.a.createElement("div",{className:"status-message"},p===Q&&"Processing: ".concat(v," of ").concat(b,"..."),p===J&&"Completed!",p===X&&"Failed!")))},$=(t(734),function(){return s.a.createElement(E,null,s.a.createElement(v,null))});l.a.render(s.a.createElement($,null),document.getElementById("root"))}},[[225,1,2]]]);
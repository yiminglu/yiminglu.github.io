(this["webpackJsonpbilling-web-ts"]=this["webpackJsonpbilling-web-ts"]||[]).push([[0],{118:function(e,a){},214:function(e,a,t){e.exports=t(717)},219:function(e,a,t){},224:function(e,a,t){},271:function(e,a,t){},667:function(e,a,t){},689:function(e,a,t){},716:function(e,a,t){},717:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),s=t(12),r=t.n(s),o=(t(219),t(79),t(45)),l=t(58),i=(t(221),t(8)),u=t.n(i),m=t(197);var d=Object(m.a)((function(){var e=Object(n.useState)({success:!1}),a=Object(l.a)(e,2),t=a[0],c=a[1];return{loginState:t,loginSuccess:function(){return c({success:!0})}}})),g=d.Provider,E=d.useContainer;t(224);u.a.tz.setDefault("Etc/GMT");var f,p=function(){var e=Object(n.useState)("MAIN_PAGE"),a=Object(l.a)(e,2),t=a[0],s=a[1],r=E().loginState.success;return c.a.createElement("div",{className:"App"},c.a.createElement(b,null),!r&&c.a.createElement(v,null),r&&"MAIN_PAGE"===t&&c.a.createElement("div",{className:"page-select-area"},c.a.createElement("div",{className:"main-title"},"Welcome!"),c.a.createElement(o.a,{className:"button salary",type:"primary",onClick:function(){s("SALARY_PAGE")}},"Salary"),c.a.createElement(o.a,{className:"button expenses",type:"primary",onClick:function(){s("EXPENSES_PAGE")},disabled:!0},"Expenses (TBD)"),c.a.createElement(o.a,{className:"button investment",type:"primary",onClick:function(){s("INVESTMENT_PAGE")},disabled:!0},"Investment (TBD)"),c.a.createElement(o.a,{className:"button logout",onClick:function(){document.location.reload()}},"Log Out")),r&&"SALARY_PAGE"===t&&c.a.createElement(F,{goBack:function(){s("MAIN_PAGE")}}),r&&"EXPENSE_PAGE"===t&&c.a.createElement("div",null,"TBD"),r&&"INVESTMENT_PAGE"===t&&c.a.createElement("div",null,"TBD"))},b=(t(271),function(){return c.a.createElement("header",{id:"header"},c.a.createElement("a",{className:"site-logo",href:"/"},c.a.createElement("img",{src:"https://seasonsroad.com/images/logo/SR-oneline.png",alt:"SeasonsRoad"})))}),y=(t(149),t(136)),N=(t(150),t(59)),h=t(78),O=t(77),S=t.n(O);t(667);h.b.configure({Auth:{identityPoolId:"us-west-2:70fc8736-5e86-47f3-ab1b-f05b0d93fa2e",region:"us-west-2",userPoolId:"us-west-2_ErwhI1bKS",userPoolWebClientId:"sq9tv2htpaluv4buido7l9eiu",mandatorySignIn:!1,authenticationFlowType:"USER_PASSWORD_AUTH"}});var v=function(){var e="",a="",t=E().loginSuccess,n=function(){if(""===e||""===a)return N.a.error({message:"Login Failed!",description:"Incorrect username or password."});h.a.signIn({username:e,password:a}).then((function(e){"NEW_PASSWORD_REQUIRED"===e.challengeName?N.a.warning({message:"New Password Required!",description:"Welcome, ".concat(e.username,"! You need to set up your new password so that we could begin.")}):"SMS_MFA"!==e.challengeName&&"SOFTWARE_TOKEN_MFA"!==e.challengeName&&"MFA_SETUP"!==e.challengeName&&(N.a.success({message:"Login Success!",description:"Welcome back, ".concat(e.username,"!")}),h.a.currentCredentials().then((function(a){S.a.config.update({region:"us-west-2"});var n=new S.a.DynamoDB({apiVersion:"2012-08-10",credentials:h.a.essentialCredentials(a)});t(),e,f=n})))})).catch((function(e){N.a.error({message:"Login Failed!",description:""+(e.message||e)})}))};return c.a.createElement("div",{className:"login-container"},c.a.createElement("div",{className:"login-title"},"Billing System"),c.a.createElement(y.a,{className:"username-input",size:"large",onChange:function(a){e=a.target.value},onPressEnter:n,placeholder:"Input User Name"}),c.a.createElement(y.a.Password,{className:"password-input",size:"large",onChange:function(e){a=e.target.value},onPressEnter:n,placeholder:"Input Password"}),c.a.createElement(o.a,{className:"login-button",size:"large",type:"primary",onClick:n},"Login"))},w=(t(719),t(135)),A=t(209),j=(t(678),t(97)),D=(t(718),t(208)),Y=t(54),M=(t(189),t(95)),P=(t(720),t(207)),T=t(18),I=(t(689),P.a.RangePicker),C=M.a.CheckableTag,_=u()().subtract(30,"days").startOf("day"),k=u()().endOf("day"),B=function(e){return Boolean(e&&e>u()().endOf("day"))},F=function(e){var a=Object(n.useState)({who:"Ming",start:_,end:k,selection:[]}),t=Object(l.a)(a,2),s=t[0],r=t[1],o=Object(n.useState)({status:"START",list:[],categories:[]}),i=Object(l.a)(o,2),m=i[0],d=i[1],g=s.who,E=s.start,p=s.end,b=s.selection;Object(n.useEffect)((function(){var e={ExpressionAttributeNames:{"#TS":"timestamp"},ExpressionAttributeValues:{":who":{S:g},":t1":{N:E.unix()+""},":t2":{N:p.unix()+""}},KeyConditionExpression:"who = :who AND #TS BETWEEN :t1 AND :t2",TableName:"Salary"};d(Object(Y.a)({},m,{status:"LOADING"})),f.query(e,(function(e,a){if(e)console.log(e,e.stack),N.a.error({message:"Query Failed!",description:""+(e.message||e)}),d(Object(Y.a)({},m,{status:"FAILED"}));else{var t=Object(T.map)(a.Items,(function(e){return{timestamp:parseInt(e.timestamp.N,10),who:e.who.S,amount:parseFloat(e.amount.N),category:e.category.S,details:e.details?e.details.S:""}})),n={};Object(T.each)(t,(function(e){n[e.category]=n[e.category]?n[e.category]+1:1}));var c=Object(T.sortBy)(Object(T.map)(n,(function(e,a){return{category:a,count:e}})),"count").reverse();d({status:"SUCCESS",list:t,categories:c}),r(Object(Y.a)({},s,{selection:Object(T.map)(c,(function(e){return e.category}))}))}}))}),[g,E,p]);var y=Object(T.filter)(m.list,(function(e){return b.includes(e.category)})),h=y.length,O=0;Object(T.each)(y,(function(e){O+=e.amount}));return c.a.createElement("div",{className:"salary-container"},c.a.createElement(D.a,{onBack:function(){e.goBack()},title:"Salary"}),c.a.createElement(j.a.Group,{onChange:function(e){r(Object(Y.a)({},s,{who:e.target.value}))},defaultValue:"Ming",buttonStyle:"solid",size:"large",className:"who-selector"},c.a.createElement(j.a.Button,{value:"Ming"},"Ming"),c.a.createElement(j.a.Button,{value:"Hehe"},"Hehe")),c.a.createElement(I,{ranges:{"This Fiscal Year":[u()("".concat(u()().year()-(u()().month()<4?1:0),"0501"),"YYYYMMDD"),u()("".concat(u()().year()+(u()().month()<4?0:1),"0401"),"YYYYMMDD").endOf("month")],"Last Fiscal Year":[u()("".concat(u()().year()-(u()().month()<4?2:1),"0501"),"YYYYMMDD"),u()("".concat(u()().year()-(u()().month()<4?1:0),"0401"),"YYYYMMDD").endOf("month")],"Last 365 Days":[u()().subtract(365,"days").startOf("day"),u()().endOf("day")],"This Year":[u()().startOf("year"),u()().endOf("year")],"Last Year":[u()().subtract(1,"year").startOf("year"),u()().subtract(1,"year").endOf("year")]},defaultValue:[_,k],disabledDate:B,onChange:function(e){r(Object(Y.a)({},s,{start:Object(T.get)(e,"0"),end:Object(T.get)(e,"1")}))},allowClear:!1,size:"large"}),c.a.createElement("div",{className:"categories"},Object(T.map)(m.categories,(function(e){return c.a.createElement(C,{key:e.category,checked:Object(T.includes)(b,e.category),onChange:function(a){r(a?Object(Y.a)({},s,{selection:[].concat(Object(A.a)(b),[e.category])}):Object(Y.a)({},s,{selection:Object(T.filter)(b,(function(a){return a!==e.category}))}))}},e.category," (",e.count,")")}))),c.a.createElement(w.a,{className:"salary-list",header:c.a.createElement("div",{className:"item header"},c.a.createElement("span",{className:"date"},"Date"),c.a.createElement("span",{className:"who"},"Who"),c.a.createElement("span",{className:"amount"},"Amount"),c.a.createElement("span",{className:"category"},"Category"),c.a.createElement("span",{className:"details"},"Details")),footer:c.a.createElement("div",{className:"salary-list-footer"},h>0&&c.a.createElement("span",null,"Count: ",h),h>0&&c.a.createElement("span",null,"Average: \uffe5",(O/h).toFixed(2)),c.a.createElement("span",null,"Total: \uffe5",O.toFixed(2))),bordered:!0,dataSource:y,renderItem:function(e){return c.a.createElement(w.a.Item,null,c.a.createElement("div",{className:"item"},c.a.createElement("span",{className:"date"},u.a.unix(e.timestamp).format("YYYY-MM-DD")),c.a.createElement("span",{className:"who"},e.who),c.a.createElement("span",{className:"amount"},"\uffe5".concat(e.amount.toFixed(2))),c.a.createElement("span",{className:"category"},e.category),c.a.createElement("span",{className:"details"},e.details)))}}))},R=(t(716),function(){return c.a.createElement(g,null,c.a.createElement(p,null))});r.a.render(c.a.createElement(R,null),document.getElementById("root"))}},[[214,1,2]]]);
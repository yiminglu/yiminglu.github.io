(this["webpackJsonpbilling-web-ts"]=this["webpackJsonpbilling-web-ts"]||[]).push([[0],{119:function(e,a){},214:function(e,a,t){e.exports=t(718)},219:function(e,a,t){},224:function(e,a,t){},271:function(e,a,t){},272:function(e,a,t){},668:function(e,a,t){},690:function(e,a,t){},717:function(e,a,t){},718:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),c=t(12),r=t.n(c),o=(t(219),t(80),t(40)),l=t(47),i=(t(221),t(8)),u=t.n(i),m=t(197);var E=Object(m.a)((function(){var e=Object(n.useState)({success:!1}),a=Object(l.a)(e,2),t=a[0],s=a[1];return{loginState:t,loginSuccess:function(){return s({success:!0})}}})),d=E.Provider,g=E.useContainer;t(224);u.a.tz.setDefault("Etc/GMT");var p,f,N=function(){var e=Object(n.useState)("MAIN_PAGE"),a=Object(l.a)(e,2),t=a[0],c=a[1],r=g().loginState.success;return s.a.createElement("div",{className:"App"},s.a.createElement(b,null),s.a.createElement("div",{className:"content-wrapper"},!r&&s.a.createElement(j,null),r&&"MAIN_PAGE"===t&&s.a.createElement("div",{className:"page-select-area"},s.a.createElement("div",{className:"main-title"},"Welcome!"),s.a.createElement(o.a,{className:"button salary",type:"primary",onClick:function(){c("SALARY_PAGE")}},"Salary"),s.a.createElement(o.a,{className:"button expenses",type:"primary",onClick:function(){c("EXPENSES_PAGE")},disabled:!0},"Expenses (TBD)"),s.a.createElement(o.a,{className:"button investment",type:"primary",onClick:function(){c("INVESTMENT_PAGE")},disabled:!0},"Investment (TBD)"),s.a.createElement(o.a,{className:"button logout",onClick:function(){document.location.reload()}},"Log Out")),r&&"SALARY_PAGE"===t&&s.a.createElement(B,{goBack:function(){c("MAIN_PAGE")}}),r&&"EXPENSE_PAGE"===t&&s.a.createElement("div",null,"TBD"),r&&"INVESTMENT_PAGE"===t&&s.a.createElement("div",null,"TBD")),s.a.createElement(O,null))},b=(t(271),function(){return s.a.createElement("header",{id:"header"},s.a.createElement("a",{className:"site-logo",href:"/"},s.a.createElement("img",{src:"/images/logo/SR-oneline.png",alt:"SeasonsRoad"})))}),O=(t(272),function(){return s.a.createElement("footer",{id:"footer"},s.a.createElement("div",{className:"wrapper"},s.a.createElement("div",{className:"left"},s.a.createElement("span",{className:"item"},s.a.createElement("a",{href:"https://github.com/yiminglu"},s.a.createElement("span",{className:"icon icon--github","aria-hidden":"true"},s.a.createElement("svg",{viewBox:"0 0 16 16"},s.a.createElement("path",{fill:"#828282",d:"M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"}))),s.a.createElement("span",{className:"username"},"yiminglu")))),s.a.createElement("div",{className:"right"},s.a.createElement("span",{className:"item"},"\xa9 SeasonsRoad"))))}),h=(t(149),t(79)),w=(t(150),t(48)),y=t(21),S=t(72),A=t(78),D=t.n(A);t(668);S.b.configure({Auth:{identityPoolId:"us-west-2:70fc8736-5e86-47f3-ab1b-f05b0d93fa2e",region:"us-west-2",userPoolId:"us-west-2_ErwhI1bKS",userPoolWebClientId:"sq9tv2htpaluv4buido7l9eiu",mandatorySignIn:!1,authenticationFlowType:"USER_PASSWORD_AUTH"}});var j=function(){var e=Object(n.useState)({username:"",password:"",status:"NOT_READY"}),a=Object(l.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)({newPassword:"",newPasswordConfirm:"",rstatus:"NOT_READY"}),i=Object(l.a)(r,2),u=i[0],m=i[1],E=t.username,d=t.password,N=t.status,b=u.newPassword,O=u.newPasswordConfirm,A=u.rstatus,j=g().loginSuccess,v=function(){S.a.currentCredentials().then((function(e){D.a.config.update({region:"us-west-2"}),f=new D.a.DynamoDB({apiVersion:"2012-08-10",credentials:S.a.essentialCredentials(e)}),j()}))},P=function(){"READY"===N&&(c(Object(y.a)({},t,{status:"LOADING"})),S.a.signIn({username:E,password:d}).then((function(e){p=e,"NEW_PASSWORD_REQUIRED"===e.challengeName?(w.a.warning({message:"New Password Required!",description:"Welcome, ".concat(e.username,"! You need to set up your new password so that we could begin.")}),c(Object(y.a)({},t,{status:"RESET"}))):"SMS_MFA"!==e.challengeName&&"SOFTWARE_TOKEN_MFA"!==e.challengeName&&"MFA_SETUP"!==e.challengeName?(w.a.success({message:"Login Success!",description:"Welcome back, ".concat(e.username,"!"),duration:3}),v(),c(Object(y.a)({},t,{status:"READY"}))):w.a.warning({message:"Unhandled User status!",description:"Please contact your admin."})})).catch((function(e){w.a.error({message:"Login Failed!",description:""+(e.message||e)}),c(Object(y.a)({},t,{status:"FAILED"}))})))},R=function(){p&&"NEW_PASSWORD_REQUIRED"===p.challengeName&&S.a.completeNewPassword(p,b,{}).then((function(e){p=e,"SMS_MFA"!==e.challengeName&&"SOFTWARE_TOKEN_MFA"!==e.challengeName&&"MFA_SETUP"!==e.challengeName?(w.a.success({message:"Login Success!",description:"Welcome back, ".concat(e.username,"!"),duration:3}),v(),c(Object(y.a)({},t,{status:"READY"}))):w.a.warning({message:"Unhandled User status!",description:"Please contact your admin."})})).catch((function(e){w.a.error({message:"Reset Failed!",description:""+(e.message||e)}),m(Object(y.a)({},u,{rstatus:"FAILED"}))}))};return s.a.createElement("div",{className:"login-container"},s.a.createElement("div",{className:"login-title"},"RESET"!==N?"Billing System":"Reset Password"),"RESET"!==N&&s.a.createElement(h.a,{className:"username-input".concat("FAILED"===N?" error":""),size:"large",onChange:function(e){var a=e.target.value;c(""!==a&&""!==d?Object(y.a)({},t,{username:a,status:"READY"}):Object(y.a)({},t,{username:a,status:"NOT_READY"}))},onPressEnter:P,placeholder:"Input User Name"}),"RESET"!==N&&s.a.createElement(h.a.Password,{className:"password-input".concat("FAILED"===N?" error":""),size:"large",onChange:function(e){var a=e.target.value;c(""!==E&&""!==a?Object(y.a)({},t,{password:a,status:"READY"}):Object(y.a)({},t,{password:a,status:"NOT_READY"}))},onPressEnter:P,placeholder:"Input Password"}),"RESET"!==N&&s.a.createElement(o.a,{className:"login-button",size:"large",type:"primary",disabled:"NOT_READY"===N,loading:"LOADING"===N,onClick:P},"Login"),"RESET"===N&&s.a.createElement(h.a.Password,{className:"password-reset-input",size:"large",onChange:function(e){var a=e.target.value;m(a===O?Object(y.a)({},u,{newPassword:a,rstatus:"READY"}):Object(y.a)({},u,{newPassword:a,rstatus:"NOT_READY"}))},onPressEnter:R,placeholder:"Input New Password"}),"RESET"===N&&s.a.createElement(h.a.Password,{className:"password-reset-confirm-input",size:"large",onChange:function(e){var a=e.target.value;m(b===a?Object(y.a)({},u,{newPasswordConfirm:a,rstatus:"READY"}):Object(y.a)({},u,{newPasswordConfirm:a,rstatus:"NOT_READY"}))},onPressEnter:R,placeholder:"Confirm New Password"}),"RESET"===N&&s.a.createElement(o.a,{className:"reset-button",size:"large",type:"primary",disabled:"NOT_READY"===A,loading:"LOADING"===A,onClick:R},"Reset"))},v=(t(719),t(136)),P=t(209),R=(t(679),t(98)),T=(t(720),t(208)),Y=(t(189),t(96)),C=(t(721),t(207)),_=t(18),I=(t(690),C.a.RangePicker),M=Y.a.CheckableTag,F=u()().subtract(30,"days").startOf("day"),L=u()().endOf("day"),k=function(e){return Boolean(e&&e>u()().endOf("day"))},B=function(e){var a=Object(n.useState)({who:"Ming",start:F,end:L,selection:[]}),t=Object(l.a)(a,2),c=t[0],r=t[1],o=Object(n.useState)({status:"START",list:[],categories:[]}),i=Object(l.a)(o,2),m=i[0],E=i[1],d=c.who,g=c.start,p=c.end,N=c.selection;Object(n.useEffect)((function(){var e={ExpressionAttributeNames:{"#TS":"timestamp"},ExpressionAttributeValues:{":who":{S:d},":t1":{N:g.unix()+""},":t2":{N:p.unix()+""}},KeyConditionExpression:"who = :who AND #TS BETWEEN :t1 AND :t2",TableName:"Salary"};E(Object(y.a)({},m,{status:"LOADING"})),f.query(e,(function(e,a){if(e)console.log(e,e.stack),w.a.error({message:"Query Failed!",description:""+(e.message||e)}),E(Object(y.a)({},m,{status:"FAILED"}));else{var t=Object(_.map)(a.Items,(function(e){return{timestamp:parseInt(e.timestamp.N,10),who:e.who.S,amount:parseFloat(e.amount.N),category:e.category.S,details:e.details?e.details.S:""}})),n={};Object(_.each)(t,(function(e){n[e.category]=n[e.category]?n[e.category]+1:1}));var s=Object(_.sortBy)(Object(_.map)(n,(function(e,a){return{category:a,count:e}})),"count").reverse();E({status:"SUCCESS",list:t,categories:s}),r(Object(y.a)({},c,{selection:Object(_.map)(s,(function(e){return e.category}))}))}}))}),[d,g,p]);var b=Object(_.filter)(m.list,(function(e){return N.includes(e.category)})),O=b.length,h=0;Object(_.each)(b,(function(e){h+=e.amount}));return s.a.createElement("div",{className:"salary-container"},s.a.createElement(T.a,{onBack:function(){e.goBack()},title:"Salary"}),s.a.createElement(R.a.Group,{onChange:function(e){r(Object(y.a)({},c,{who:e.target.value}))},defaultValue:"Ming",buttonStyle:"solid",size:"large",className:"who-selector"},s.a.createElement(R.a.Button,{value:"Ming"},"Ming"),s.a.createElement(R.a.Button,{value:"Hehe"},"Hehe")),s.a.createElement(I,{ranges:{"This Fiscal Year":[u()("".concat(u()().year()-(u()().month()<4?1:0),"0501"),"YYYYMMDD"),u()("".concat(u()().year()+(u()().month()<4?0:1),"0401"),"YYYYMMDD").endOf("month")],"Last Fiscal Year":[u()("".concat(u()().year()-(u()().month()<4?2:1),"0501"),"YYYYMMDD"),u()("".concat(u()().year()-(u()().month()<4?1:0),"0401"),"YYYYMMDD").endOf("month")],"Last 365 Days":[u()().subtract(365,"days").startOf("day"),u()().endOf("day")],"This Year":[u()().startOf("year"),u()().endOf("year")],"Last Year":[u()().subtract(1,"year").startOf("year"),u()().subtract(1,"year").endOf("year")]},defaultValue:[F,L],disabledDate:k,onChange:function(e){r(Object(y.a)({},c,{start:Object(_.get)(e,"0"),end:Object(_.get)(e,"1")}))},allowClear:!1,size:"large"}),s.a.createElement("div",{className:"categories"},Object(_.map)(m.categories,(function(e){return s.a.createElement(M,{key:e.category,checked:Object(_.includes)(N,e.category),onChange:function(a){r(a?Object(y.a)({},c,{selection:[].concat(Object(P.a)(N),[e.category])}):Object(y.a)({},c,{selection:Object(_.filter)(N,(function(a){return a!==e.category}))}))}},e.category," (",e.count,")")}))),s.a.createElement(v.a,{className:"salary-list",header:s.a.createElement("div",{className:"item header"},s.a.createElement("span",{className:"date"},"Date"),s.a.createElement("span",{className:"who"},"Who"),s.a.createElement("span",{className:"amount"},"Amount"),s.a.createElement("span",{className:"category"},"Category"),s.a.createElement("span",{className:"details"},"Details")),footer:s.a.createElement("div",{className:"salary-list-footer"},O>0&&s.a.createElement("span",null,"Count: ",O),O>0&&s.a.createElement("span",null,"Average: \uffe5",(h/O).toFixed(2)),s.a.createElement("span",null,"Total: \uffe5",h.toFixed(2))),bordered:!0,dataSource:b,renderItem:function(e){return s.a.createElement(v.a.Item,null,s.a.createElement("div",{className:"item"},s.a.createElement("span",{className:"date"},u.a.unix(e.timestamp).format("YYYY-MM-DD")),s.a.createElement("span",{className:"who"},e.who),s.a.createElement("span",{className:"amount"},"\uffe5".concat(e.amount.toFixed(2))),s.a.createElement("span",{className:"category"},e.category),s.a.createElement("span",{className:"details"},e.details)))}}))},G=(t(717),function(){return s.a.createElement(d,null,s.a.createElement(N,null))});r.a.render(s.a.createElement(G,null),document.getElementById("root"))}},[[214,1,2]]]);
const cacheName = 'sr-precache-cbac084b85845032d3f9466f8d0abd5093e067a1';

const PrecacheList = [
  "/",
  "/index.html",
  "/css/main.min.css",
  "/js/main.min.js",
  "/js/ga.js",
  "/posts.html",
  "/contact.html",
  "/about.html",
  "/404.html",
  "/manifest.json",
  "/favicon.ico",
  "billing/index.html",
  "billing/static/css/2.b3df3a16.chunk.css",
  "billing/static/css/main.4711ce4f.chunk.css",
  "billing/static/js/2.a1dd960b.chunk.js",
  "billing/static/js/2.a1dd960b.chunk.js.LICENSE",
  "billing/static/js/main.88c45c8d.chunk.js",
  "billing/static/js/runtime-main.072db1e7.js",
  "post/2009/luck.html",
  "post/2009/yuanyuan.html",
  "post/2013/git-config.html",
  "post/2013/live-in-beijing.html",
  "post/2013/not-a-good-ending.html",
  "post/2014/a-dark-room.html",
  "post/2014/markdown-syntax.html",
  "post/2015/connect-ipv6.html",
  "post/2015/crossroads.html",
  "post/2015/ftf-to-zip.html",
  "post/2015/ftf-to-zip/META-INF.zip",
  "post/2015/git-best-practices.html",
  "post/2015/git-config/git-l.png",
  "post/2015/git-config/git-lb.png",
  "post/2015/git-config/git-ll.png",
  "post/2015/go-chase-our-dreams.html",
  "post/2015/go-chase-our-dreams/01.jpg",
  "post/2015/responsive-design.html",
  "post/2015/responsive-design/Desktop-first-vs-Mobile-first.gif",
  "post/2015/responsive-design/Flow-vs-Static.gif",
  "post/2015/responsive-design/Max-width-vs-No-max-width.gif",
  "post/2015/responsive-design/Nested-vs-Not-Nested.gif",
  "post/2015/responsive-design/Relative-Units-vs-Static-Units.gif",
  "post/2015/responsive-design/Responsive-vs-Adaptive.gif",
  "post/2015/responsive-design/System-fonts-vs-Webfonts.gif",
  "post/2015/responsive-design/Vectors-vs-Images.gif",
  "post/2015/responsive-design/With-Breakpoints-vs-Without-Breakpoints.gif",
  "post/2016/spot.html",
  "post/2016/spot/comments-1.jpg",
  "post/2016/spot/comments-2.jpg",
  "post/2016/spot/comments-3.jpg",
  "post/2016/spot/comments-4.jpg",
  "post/2016/spot/geo-impact.png",
  "post/2016/spot/missing-asset.png",
  "post/2016/spot/problems.png",
  "post/2018/feelings-of-leaving.html",
  "post/2018/migration-to-https.html",
  "post/2018/migration-to-https/cert.png",
  "post/2018/migration-to-https/secure.png",
  "post/2018/pwa-integration.html",
  "post/2018/pwa-integration/pwa.gif",
  "post/2019/adding-dark-mode.html",
  "post/2019/adding-dark-mode/after.jpg",
  "post/2019/adding-dark-mode/before.jpg",
  "post/2019/over-concern.html",
  "post/2019/the-2nd-birthday.html",
  "images/logo/daisy.png",
  "images/logo/leaf-1.png",
  "images/logo/leaf-2.png",
  "images/logo/opaque-128.png",
  "images/logo/opaque-152.png",
  "images/logo/opaque-167.png",
  "images/logo/opaque-180.png",
  "images/logo/opaque-256.png",
  "images/logo/opaque-512.png",
  "images/logo/SR-full.png",
  "images/logo/SR-huge.png",
  "images/logo/SR-oneline.png",
  "images/logo/SR-simple.png",
  "images/logo/transparent-128.png",
  "images/logo/transparent-192.png",
  "images/logo/transparent-256.png",
  "images/logo/transparent-512.png",
  "images/splashscreens/ipad_splash.png",
  "images/splashscreens/ipadpro1_splash.png",
  "images/splashscreens/ipadpro2_splash.png",
  "images/splashscreens/ipadpro3_splash.png",
  "images/splashscreens/iphone6_splash.png",
  "images/splashscreens/iphoneplus_splash.png",
  "images/splashscreens/iphonex_splash.png",
  "images/splashscreens/iphonexr_splash.png",
  "images/splashscreens/iphonexsmax_splash.png",
  "images/topbar/1.jpg",
  "images/topbar/2.jpg",
  "images/topbar/3.jpg",
  "images/topbar/4.jpg",
  "images/topbar/5.jpg",
  "images/topbar/6.jpg",
  "fonts/OpenSans-Bold.eot",
  "fonts/OpenSans-Bold.svg",
  "fonts/OpenSans-Bold.ttf",
  "fonts/OpenSans-Bold.woff",
  "fonts/OpenSans-Bold.woff2",
  "fonts/OpenSans-BoldItalic.eot",
  "fonts/OpenSans-BoldItalic.svg",
  "fonts/OpenSans-BoldItalic.ttf",
  "fonts/OpenSans-BoldItalic.woff",
  "fonts/OpenSans-BoldItalic.woff2",
  "fonts/OpenSans-ExtraBold.eot",
  "fonts/OpenSans-ExtraBold.svg",
  "fonts/OpenSans-ExtraBold.ttf",
  "fonts/OpenSans-ExtraBold.woff",
  "fonts/OpenSans-ExtraBold.woff2",
  "fonts/OpenSans-ExtraBoldItalic.eot",
  "fonts/OpenSans-ExtraBoldItalic.svg",
  "fonts/OpenSans-ExtraBoldItalic.ttf",
  "fonts/OpenSans-ExtraBoldItalic.woff",
  "fonts/OpenSans-ExtraBoldItalic.woff2",
  "fonts/OpenSans-Italic.eot",
  "fonts/OpenSans-Italic.svg",
  "fonts/OpenSans-Italic.ttf",
  "fonts/OpenSans-Italic.woff",
  "fonts/OpenSans-italic.woff2",
  "fonts/OpenSans-Light.eot",
  "fonts/OpenSans-Light.svg",
  "fonts/OpenSans-Light.ttf",
  "fonts/OpenSans-Light.woff",
  "fonts/OpenSans-Light.woff2",
  "fonts/OpenSans-LightItalic.eot",
  "fonts/OpenSans-LightItalic.svg",
  "fonts/OpenSans-LightItalic.ttf",
  "fonts/OpenSans-LightItalic.woff",
  "fonts/OpenSans-LightItalic.woff2",
  "fonts/OpenSans-Regular.eot",
  "fonts/OpenSans-Regular.svg",
  "fonts/OpenSans-Regular.ttf",
  "fonts/OpenSans-Regular.woff",
  "fonts/OpenSans-Regular.woff2",
  "fonts/OpenSans-Semibold.eot",
  "fonts/OpenSans-Semibold.svg",
  "fonts/OpenSans-Semibold.ttf",
  "fonts/OpenSans-Semibold.woff",
  "fonts/OpenSans-Semibold.woff2",
  "fonts/OpenSans-SemiboldItalic.eot",
  "fonts/OpenSans-SemiboldItalic.svg",
  "fonts/OpenSans-SemiboldItalic.ttf",
  "fonts/OpenSans-SemiboldItalic.woff",
  "fonts/OpenSans-SemiboldItalic.woff2"
];


self.addEventListener('install', function(e) {
  console.log('[SW] Install');
  e.waitUntil(
    caches.open(cacheName).then(function(cache) {
      console.log('[SW] Caching all files.');
      cache.addAll(PrecacheList);
      console.log('[SW] SkipWaiting');
      return self.skipWaiting();
    })
  );
});


self.addEventListener('activate', function(e) {
  console.log('[SW] Activate');
  e.waitUntil(
    caches.keys().then(function(keyList) {
      return Promise.all(keyList.map(function(key) {
        if (key !== cacheName) {
          console.log('[SW] Removing old cache', key);
          return caches.delete(key);
        }
      }));
    })
  );
  return self.clients.claim();
});


self.addEventListener('fetch', function(e) {
  e.respondWith(
    caches.match(e.request).then(function(response) {
      return response || fetch(e.request);
    })
  );
});


<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>My Bash config | Yiming @ github.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Besides vim configuration, bash can also be configured. Well configured bash goes the right way you want it to be.
Related filesThere are 3 files related with bash, .bashrc, .bash_profile and .bash_hi">
<meta property="og:type" content="article">
<meta property="og:title" content="My Bash config">
<meta property="og:url" content="http://yiminglu.github.io/2015/04/MyBashConfig/index.html">
<meta property="og:site_name" content="Yiming @ github.io">
<meta property="og:description" content="Besides vim configuration, bash can also be configured. Well configured bash goes the right way you want it to be.
Related filesThere are 3 files related with bash, .bashrc, .bash_profile and .bash_hi">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="My Bash config">
<meta name="twitter:description" content="Besides vim configuration, bash can also be configured. Well configured bash goes the right way you want it to be.
Related filesThere are 3 files related with bash, .bashrc, .bash_profile and .bash_hi">
  
    <link rel="alternative" href="/atom.xml" title="Yiming @ github.io" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-nav" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Good Morning!</a>
      </h1>
      <nav id="main-nav">
        <ul class="mod-head__ul">
        
          <li class="main-nav-link"><a href="/">Home</a></li>
        
          <li class="main-nav-link"><a href="/links.html">Links</a></li>
        
          <li class="main-nav-link"><a href="https://github.com/yiminglu">Github</a></li>
        
          <li class="main-nav-link"><a href="http://weibo.com/u/2168765080">Weibo</a></li>
        
          <li class="main-nav-link"><a href="/about.html">About</a></li>
        
        </ul>
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
      </nav>
    </div>
  </div>
</header>
      <div class="inner">
        <section id="main"><article id="post-MyBashConfig" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/04/MyBashConfig/" class="article-date">
  <p><time datetime="2015-04-30T06:43:00.000Z" itemprop="datePublished">2015/04/30</time></p>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Develop/">Develop</a>
  </div>

    </div>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      <a href="/2015/04/MyBashConfig/">
        My Bash config
      </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Besides <a href="/2015/04/MyViConfig/">vim configuration</a>, bash can also be configured. Well configured bash goes the right way you want it to be.</p>
<h1 id="Related_files">Related files</h1><p>There are 3 files related with bash, <code>.bashrc</code>, <code>.bash_profile</code> and <code>.bash_history</code>. The 3rd file is easy to understand, and it saves the commands you executed in the history. Then what about the first 2 files?</p>
<h1 id="What’s_the_difference_between_-bashrc_and_-bash_profile">What’s the difference between <code>.bashrc</code> and <code>.bash_profile</code></h1><p>According to the <a href="http://linux.die.net/man/1/bash" target="_blank" rel="external">bash man page</a>, <code>.bash_profile</code> is executed for login shells, while <code>.bashrc</code> is executed for interactive non-login shells.</p>
<p>When you login with your username and password via console or remotely via ssh, <code>.bash_profile</code> is executed to configure your bash, and then <code>.bashrc</code> executed. Then you open a terminal window or type <code>\bin\bash</code>, only <code>.bashrc</code> is executed.</p>
<h2 id="That’s_not_true_for_Mac_OS_X!">That’s not true for Mac OS X!</h2><blockquote>
<p>An exception to the terminal window guidelines is Mac OS X’s Terminal.app, which runs a login shell by default for each new terminal window, calling <code>.bash_profile</code> instead of <code>.bashrc</code>. Other GUI terminal emulators may do the same, but most tend not to.<br><a href="http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html" target="_blank" rel="external">view SOURCE</a></p>
</blockquote>
<p>I didn’t test whether <code>.bashrc</code> will be executed when ssh to a mac.</p>
<h2 id="Do_this_to_adapt_to_this_change">Do this to adapt to this change</h2><p>Most time, you don’t want to seperate to files and mentain them both. You can add another profile to be sourced to both this two config files. Then you just need to update this separate file. We use this way to sourse this <code>~/.profile</code> file to <code>~/.bashrc</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ~/.profile ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">source</span> ~/.profile</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add your own prifile here!</span></span><br></pre></td></tr></table></figure>
<p>And we use a chain to source files like this: <code>bash_profile</code> -&gt; <code>.bashrc</code> -&gt; <code>.profile</code>, and <code>we don&#39;t use</code>bash_profile<code>&amp;</code>.profile<code>-&gt;</code>.profile<code>, so that you can add your profile to</code>.bashrc<code>file. So the</code>~/.bash_profile` goes:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h1 id="Let’s_configure_the_-profile!">Let’s configure the <code>.profile</code>!</h1><p>First of all, this file is used for MacOSX. some of the options may not be right in usual Linux or Unix.</p>
<h2 id="bash_history">bash history</h2><p>Save more, and you can use more!</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> BASH_HISTORY=<span class="number">5000</span></span><br></pre></td></tr></table></figure>
<h2 id="ls_alias">ls alias</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ls=<span class="string">'ls -G'</span>                <span class="comment"># enable colored output</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">'ls -l -G -h'</span>          <span class="comment"># set human-readable size</span></span><br><span class="line"><span class="built_in">alias</span> la=<span class="string">'ls -a -G'</span>             <span class="comment"># show all files</span></span><br></pre></td></tr></table></figure>
<h2 id="git_alias">git alias</h2><p>We can set some git alias here.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> gitc=<span class="string">'git commit'</span></span><br><span class="line"><span class="built_in">alias</span> gits=<span class="string">'git status'</span></span><br><span class="line"><span class="built_in">alias</span> gitl=<span class="string">'git log'</span></span><br><span class="line"><span class="built_in">alias</span> gitp=<span class="string">'git pull'</span>           <span class="comment"># Not git push!</span></span><br><span class="line"><span class="built_in">alias</span> gitco=<span class="string">'git checkout'</span></span><br></pre></td></tr></table></figure>
<p>However, we usually don’t do this. We can set some git alias by <code>git config [--global] alias.(new) &quot;old&quot;</code>. With command <code>git config --global alias.co &quot;checkout&quot;</code>, we can set <code>git checkout</code> to <code>git co</code>. Check <a href="/2015/05/SomeGitAlias/">that way</a>!</p>
<h2 id="other_commands_alias">other commands alias</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># alias hexo</span></span><br><span class="line"><span class="built_in">alias</span> hexorun=<span class="string">'hexo clean &amp;&amp; hexo g &amp;&amp; hexo s'</span></span><br></pre></td></tr></table></figure>
<h2 id="APP_alias">APP alias</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sublime text to `subl`</span></span><br><span class="line"><span class="built_in">alias</span> subl=<span class="string">'/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl'</span></span><br></pre></td></tr></table></figure>
<h1 id="configure_the_BASH_$PS1">configure the BASH <code>$PS1</code></h1><p><code>$PS1</code> is used for bash to show the default interaction prompt. There are also <code>$PS2</code>, <code>$PS3</code>, <code>$PS4</code> and <code>PROMPT_COMMAND</code>, check them on <a href="http://www.thegeekstuff.com/2008/09/bash-shell-take-control-of-ps1-ps2-ps3-ps4-and-prompt_command/" target="_blank" rel="external">this post</a>.</p>
<h2 id="$PS1_can_be_modified_to_more_useful_and_informative-"><code>$PS1</code> can be modified to more useful and informative.</h2><p>The default <code>$PS1</code> was <code>\s-\v\$</code>, which displays the shell name(<code>\s</code>) and the version number(<code>\v</code>). Of course there are more options:</p>
<ul>
<li>\u  The name of the logged-in user</li>
<li>\h  The hostname up to the first ‘.’</li>
<li>\H  The full hostname</li>
<li>\w  Full path of the current working directory</li>
<li>\W  Current working dirctory name</li>
<li>\n  New line</li>
<li>\$  Shows a $ for a regular user or # for root user</li>
<li>\t  Display the current time in the format “16:12:30”</li>
<li>\@  Display the current time in the format “04:12 PM”</li>
<li>!  The history number of the command</li>
<li>\$? Status of the last command</li>
<li>\  A literal backslash “\” character</li>
<li>$kernel_version  The output of the <code>uname -r</code> command from $kernel_version variable</li>
</ul>
<p>We can set the <code>$PS1</code> with the easist way to this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">'\u@\h \W $'</span></span><br></pre></td></tr></table></figure>
<h2 id="So_do_the_$PS2_and_etc-">So do the <code>$PS2</code> and etc.</h2><p><code>$PS2</code> display the continuation interactive prompt for multi-line commands. <code>$PS3</code> is for the <code>select</code> command to show prompt inside shell script. <code>$PS4</code> is for the <code>set -x</code>. <code>$PROMPT_COMMAND</code> is a command to execute just before displaying the <code>$PS1</code> variable.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS2=<span class="string">' -&gt; '</span></span><br></pre></td></tr></table></figure>
<h2 id="git_branch_for_$PS1_(Define_a_function_to_use)">git branch for <code>$PS1</code> (Define a function to use)</h2><p>Sometimes, we want to show the git branch if we are in a git repo directory. Then we may need to add a function to do this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># show git branch for bash $PS1</span></span><br><span class="line"><span class="function"><span class="title">__git4ps1</span></span>() &#123;</span><br><span class="line">    git branch <span class="number">2</span>&gt;/dev/null | grep <span class="string">'*'</span> | sed <span class="string">'s/* \(.*\)/ &lt;\1&gt;/'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> PS1=<span class="string">"\u@\h \W\$(__git4ps1) $ "</span></span><br></pre></td></tr></table></figure>
<h2 id="Color_these_commands!">Color these commands!</h2><p>Add some colors may make us to focus more on the useful information. We don’t care the user and host name, right?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">"\[\033[37m\]\u@\h \[\033[00m\]\W\[\033[33m\]\$(__git4ps1)\[\033[00m\] $ "</span></span><br><span class="line"><span class="built_in">export</span> PS2=<span class="string">"\[\033[37m\] -&gt;\[\033[00m\] "</span></span><br></pre></td></tr></table></figure>
<h2 id="Another_way_to_color_the_commands">Another way to color the commands</h2><p>We use <code>\[\x[ym\]</code> style color to change all the color scheme behind this command. Now we use another way to control color scheme of a code block <code>\e[x;ym ... \e[m</code>. In this kind of style, <code>\e[</code> indicates the beginning of the code block, and <code>x;ym</code> indicates color code, and <code>\e[m</code> indeicates the end of code block. And we have these usually-used colors here:</p>
<ul>
<li>Black 0;30</li>
<li>Blue 0;34</li>
<li>Green 0;32</li>
<li>Cyan 0;36</li>
<li>Red 0;31</li>
<li>Purple 0;35</li>
<li>Brown 0;33</li>
</ul>
<blockquote>
<p>[Note: Replace 0 with 1 for dark color]</p>
</blockquote>
<p>More information about color prompt, check <a href="http://www.thegeekstuff.com/2008/09/bash-shell-ps1-10-examples-to-make-your-linux-prompt-like-angelina-jolie/" target="_blank" rel="external">this post</a>.</p>
<h1 id="All_together,_we_got_it-">All together, we got it.</h1><h2 id="For_-profile">For <code>.profile</code></h2><p><a href="profile">Download</a> file</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">export BASH_HISTORY=5000</span><br><span class="line"></span><br><span class="line">alias ls='ls -G'</span><br><span class="line">alias ll='ls -l -G -h'</span><br><span class="line">alias la='ls -a -G'</span><br><span class="line"></span><br><span class="line">alias hexorun='hexo clean <span class="special">&amp;</span><span class="special">&amp;</span> hexo g <span class="special">&amp;</span><span class="special">&amp;</span> hexo s'</span><br><span class="line"></span><br><span class="line">alias subl='/Applications/Sublime<span class="command">\ </span>Text.app/Contents/SharedSupport/bin/subl'</span><br><span class="line"></span><br><span class="line">__git4ps1() <span class="special">&#123;</span></span><br><span class="line">    git branch 2&gt;/dev/null | grep '*' | sed 's/* <span class="command">\(</span>.*<span class="command">\)</span>/ &lt;\1&gt;/'</span><br><span class="line"><span class="special">&#125;</span></span><br><span class="line"></span><br><span class="line">export PS1="<span class="command">\[</span>\033<span class="special">[</span>37m<span class="command">\]</span><span class="command">\u</span>@<span class="command">\h</span> <span class="command">\[</span>\033<span class="special">[</span>00m<span class="command">\]</span><span class="command">\W</span><span class="command">\[</span>\033<span class="special">[</span>33m<span class="command">\]</span><span class="command">\$</span>(__git4ps1)<span class="command">\[</span>\033<span class="special">[</span>00m<span class="command">\]</span> <span class="formula">$ "</span><br><span class="line">export PS2="<span class="command">\[</span>\033<span class="special">[</span>37m<span class="command">\]</span> -&gt;<span class="command">\[</span>\033<span class="special">[</span>00m<span class="command">\]</span> "</span></span><br></pre></td></tr></table></figure>
<h2 id="For_-bashrc_and_your_own_profile">For <code>.bashrc</code> and your own profile</h2><p><a href="bashrc">Download</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ~/.profile ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">source</span> ~/.profile</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add your own profile here!</span></span><br></pre></td></tr></table></figure>
<h1 id="For_-bash_profile">For <code>.bash_profile</code></h1><p><a href="bash_profile">Download</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/05/SomeGitAlias/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&laquoNewer</strong>
      <div class="article-nav-title">
        
          Some Usually Used Git Alias
        
      </div>
    </a>
  
  
    <a href="/2015/04/9ResponsiveDesignPrinciples/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older&raquo</strong>
      <div class="article-nav-title">9 Basic Principles of Responsive Web Design</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
	<div id="footer-info" class="inner">
	&copy; 2015 Yiming LU<br>
	Hosted on <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.
	</div>
  </div>
</footer>
    </div>
    
<script>
  var disqus_shortname = 'ymlu';
  
  var disqus_url = 'http://yiminglu.github.io/2015/04/MyBashConfig/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

  </div>
</body>
</html>
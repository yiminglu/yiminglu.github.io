<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Documentation | Yiming @ SeasonsRoad</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Our Potion plugin has a bunch of useful functionality in it, but it won’t be really useful to anyone unless we document it so they know what it can do!
Vim’s own documentation is superb.  It’s not ove">
<meta property="og:type" content="website">
<meta property="og:title" content="Documentation">
<meta property="og:url" content="http://seasonsroad.com/LearnVimScriptTheHardWay/54.html">
<meta property="og:site_name" content="Yiming @ SeasonsRoad">
<meta property="og:description" content="Our Potion plugin has a bunch of useful functionality in it, but it won’t be really useful to anyone unless we document it so they know what it can do!
Vim’s own documentation is superb.  It’s not ove">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Documentation">
<meta name="twitter:description" content="Our Potion plugin has a bunch of useful functionality in it, but it won’t be really useful to anyone unless we document it so they know what it can do!
Vim’s own documentation is superb.  It’s not ove">
  
    <link rel="alternative" href="/atom.xml" title="Yiming @ SeasonsRoad" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-nav" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Good Morning!</a>
      </h1>
      <nav id="main-nav">
        <ul class="mod-head__ul">
        
          <li class="main-nav-link"><a href="/">Home</a></li>
        
          <li class="main-nav-link"><a href="/links.html">Links</a></li>
        
          <li class="main-nav-link"><a href="https://github.com/yiminglu">Github</a></li>
        
          <li class="main-nav-link"><a href="http://weibo.com/u/2168765080">Weibo</a></li>
        
          <li class="main-nav-link"><a href="/about.html">About</a></li>
        
        </ul>
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
      </nav>
    </div>
  </div>
</header>
      <div class="inner">
        <section id="main"><article id="page-undefined" class="article article-type-page" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      <a href="/LearnVimScriptTheHardWay/54.html">
        Documentation
      </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Our Potion plugin has a bunch of useful functionality in it, but it won’t be really useful to anyone unless we document it so they know what it can do!</p>
<p>Vim’s own documentation is superb.  It’s not overly wordy, but it’s extremely thorough.  It’s also inspired many plugin authors to document their own plugins very well, which has resulted in a wonderful culture of strong documentation in the Vimscript community.</p>
<h2 id="How_Documentation_Works">How Documentation Works</h2><p>When you read a <code>:help</code> topic in Vim you’ve surely noticed that some things are highlighted differently than others.  Let’s take a look at how this works.</p>
<p>Open up any help topic (such as <code>:help help</code>) and run <code>:set filetype?</code>.  Vim will display <code>filetype=help</code>.  Now run <code>:set filetype=text</code>, and you’ll see that the highlighting goes away.  <code>:set filetype=help</code> again and it will come back.</p>
<p>It turns out that Vim help files are simply syntax-highlighted text files like any other file format!  This means you can write your own and get the same highlighting.</p>
<p>Create a file called <code>doc/potion.txt</code> in your plugin repo.  Vim/Pathogen looks for files inside <code>doc</code> folders when indexing help topics, so this is where we’ll write the help for our plugin.</p>
<p>Open this file in Vim and run <code>:set filetype=help</code> so you can see the syntax highlighting as you type.</p>
<h2 id="Help_Header">Help Header</h2><p>The format of help files is a matter of personal taste.  With that said, I’ll talk about one way to structure them that seems to be popular with the modern Vimscript community.</p>
<p>The first line of the file should contain the filename of the help file, followed by a one-line description of what the plugin does.  Add the following as the first line of your <code>potion.txt</code> file:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">*</span>potion.txt<span class="keyword">*</span> functionality for the potion programming language</span><br></pre></td></tr></table></figure>
<p>Surrounding a word with asterisks in a help file creates a “tag” that can be jumped to.  Run <code>:Helptags</code> to tell Pathogen to rebuild the index of help tags, and then open a new Vim window and run <code>:help potion.txt</code>.  Vim will open your help document like any other one.</p>
<p>Next you should put the title of your plugin along with a longer description. Some authors (including me) like to have a bit of fun with this and use some ASCII art to spice things up.  Add a nice title section to the <code>potion.txt</code> file:</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">*potion.txt* functionality for the potion programming language</span><br><span class="line"></span><br><span class="line">                  ___      _   _              <span class="special">~</span></span><br><span class="line"></span><br><span class="line">                 / _ <span class="command">\_</span>__ | |_(_) ___  _ __   <span class="special">~</span></span><br><span class="line"></span><br><span class="line">                / /_)/ _ <span class="command">\|</span> __| |/ _ <span class="command">\|</span> '_ <span class="command">\ </span> <span class="special">~</span></span><br><span class="line"></span><br><span class="line">               / ___/ (_) | |_| | (_) | | | | <span class="special">~</span></span><br><span class="line"></span><br><span class="line">               <span class="command">\/</span>    <span class="command">\_</span>__/ <span class="command">\_</span>_|_|<span class="command">\_</span>__/|_| |_| <span class="special">~</span></span><br><span class="line"></span><br><span class="line">      Functionality for the Potion programming language.</span><br><span class="line"></span><br><span class="line">    Includes syntax highlighting, code folding, and more!</span><br></pre></td></tr></table></figure>
<p>I got those fun letters by running the <code>figlet -f ogre &quot;Potion&quot;</code> command. <a href="http://www.figlet.org/" target="_blank" rel="external">Figlet</a> is a great little program for generating ASCII art text.  The <code>~</code> characters at the end of the lines ensure that Vim doesn’t try to highlight or hide individual characters inside the art.</p>
<h2 id="What_to_Document">What to Document</h2><p>Next usually comes a table of contents.  First, though, let’s decide what we actually want to document.</p>
<p>When writing documentation for a new plugin I usually start with the following list of sections and work from there:</p>
<ul>
<li>Introduction <em> Usage </em> Mappings <em> Configuration </em> License <em> Bugs </em> Contributing <em> Changelog </em> Credits</li>
</ul>
<p>If the plugin is large and requires an “overview” I’ll write an introductory section that summarizes how things work.  Otherwise I’ll skip that and just move on.</p>
<p>A “usage” section should explain in, general, how the user will actually <em>use</em> your plugin.  If they’ll interact with it through mappings, tell them that.  If there aren’t too many mappings you can simply list them here, otherwise you may want to create a separate “mappings” section that lists them all.</p>
<p>The “configuration” section should list each and every user-modifiable variable, along with its effects and its default value.</p>
<p>The “license” section should specify what license the plugin’s code is under, as well as a URL where the user can find the full text of that license.  Don’t include the full text in the actual help file — most users know what the common licenses mean and it just clutters things up.</p>
<p>The “bugs” section should be short and sweet.  List any major bugs that you’re aware of but haven’t gotten around to fixing, and tell the user how they can report new bugs they find to you.</p>
<p>If you want your users to be able to contribute bug fixes and features for the plugin back to you, they’ll need to know how to do it.  Should they send a pull request on GitHub?  On Bitbucket?  Send a patch in an email?  Any/all of the above?  Include a “contributing” section makes it clear how you prefer to receive code.</p>
<p>A changelog is a wonderful thing to include so that when users update your plugin from version X to version Y they can immediately see what changed.  Also, I highlight recommend you pick a sane versioning scheme like <a href="http://semver.org/" target="_blank" rel="external">Semantic Versioning</a> for your plugin and stick to it.  Your users will thank you.</p>
<p>Finally, I like to include a “credits” section to mention my own name, list other plugins that this one was inspired by, thank contributors, and so on.</p>
<p>This is usually a good starting point.  For more unique plugins you may feel the need to deviate from this list, and that’s completely fine.  There are no hard and fast rules except the following:</p>
<ul>
<li>Be thorough. <em> Don’t be too wordy. </em> Take the user on a journey from having no idea what your plugin is to being an<br>expert user of it.</li>
</ul>
<h2 id="Table_of_Contents">Table of Contents</h2><p>Now that we have an idea of what sections we’ll include, add the following to the <code>potion.txt</code> file:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="subst">====================================================================</span></span><br><span class="line"></span><br><span class="line">CONTENTS                                            <span class="subst">*</span>PotionContents<span class="subst">*</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> Usage <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">. </span><span class="subst">|</span>PotionUsage<span class="subst">|</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> Mappings <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">. </span><span class="subst">|</span>PotionMappings<span class="subst">|</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> License <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.. </span><span class="subst">|</span>PotionLicense<span class="subst">|</span></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> Bugs <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.. </span><span class="subst">|</span>PotionBugs<span class="subst">|</span></span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> Contributing <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span> <span class="subst">|</span>PotionContributing<span class="subst">|</span></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> Changelog <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span> <span class="subst">|</span>PotionChangelog<span class="subst">|</span></span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> Credits <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.. </span><span class="subst">|</span>PotionCredits<span class="subst">|</span></span><br></pre></td></tr></table></figure>
<p>There are a couple things to note here.  First, the line of <code>=</code> characters will be syntax highlighted.  You can use these lines to visually divide up sections of your help document.  You can also use lines of <code>-</code> characters for subsections, if you want.</p>
<p>The <code>*PotionContents*</code> will create another tag, so a user can type <code>:help PotionContents</code> to go directly to the table of contents.</p>
<p>Each of the words surrounded by <code>|</code> characters creates a link to a tag.  Users can place their cursor on the word in the help file and press <code>&lt;c-]&gt;</code> to jump to the tag, just as if they had typed <code>:help TheTag</code>.  They can also click them with their mouse.</p>
<p>Vim will hide these <code>*</code> and <code>|</code> characters and syntax highlight them, so the result will be a nice, pretty table of contents people can use to get to what they’re looking for.</p>
<h2 id="Sections">Sections</h2><p>You can create section headers like this:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="subst">====================================================================</span></span><br><span class="line"></span><br><span class="line">Section <span class="number">1</span>: Usage                                       <span class="subst">*</span>PotionUsage<span class="subst">*</span></span><br><span class="line"></span><br><span class="line">This plugin <span class="keyword">with</span> automatically <span class="keyword">provide</span> syntax highlighting for</span><br><span class="line"></span><br><span class="line">Potion files (files ending <span class="keyword">in</span> <span class="built_in">.</span>pn)<span class="built_in">.</span><br><span class="line"></span><br><span class="line"></span>It also<span class="attribute">...</span></span><br></pre></td></tr></table></figure>
<p>Make sure to create the correct tags with the <code>*</code> characters so that all the links in your table of contents work properly.</p>
<p>Go ahead and create headers for each section in the table of contents.</p>
<h2 id="Examples">Examples</h2><p>I could try to go over all the syntax of help files and how to use it, but it’s really a matter of taste.  So instead I’ll give you a list of several Vim plugins with extensive documentation.</p>
<p>For each one, copy the raw source of the documentation into a Vim buffer and set its filetype to <code>help</code> to see how it renders.  Switch back to <code>text</code> when you want to see how an effect was created.</p>
<p>You may find it useful to use your Vimscript skills create a key mapping to toggle the <code>help</code> and <code>text</code> filetypes for the current buffer.</p>
<ul>
<li>[Clam][], my own plugin for working with shell commands.  It’s a pretty short<br>example that hits most of the sections I talked about. <em> The [NERD tree][], a file navigation plugin by Scrooloose.  Note the general<br>structure, as well as how he summarizes the mappings in an easy-to-read list<br>before explaining every one in detail. </em> [Surround][], a plugin for handling “surrounding” characters by Tim Pope.<br>Note the lack of a table of contents, the different style of section<br>headers, and the table column headers.  Figure out how these things were done,<br>and decide if you like them.  It’s a matter of taste. * [Splice][], my own plugin for resolving three-way merge conflicts in version<br>control systems.  Note how the lists of mappings are formatted, and how I used<br>ASCII-art diagrams to explain layouts.  Sometimes a picture really is worth<br>a thousand words.</li>
</ul>
<p>Remember that all of the vanilla Vim documentation can also be used as an example too.  That should give you plenty to study and learn from.</p>
<p>[Clam]: <a href="https://github.com/sjl/clam.vim/blob/master/doc/clam.txt" target="_blank" rel="external">https://github.com/sjl/clam.vim/blob/master/doc/clam.txt</a> [Surround]: <a href="https://github.com/tpope/vim-surround/blob/master/doc/surround.txt" target="_blank" rel="external">https://github.com/tpope/vim-surround/blob/master/doc/surround.txt</a> [NERD tree]: <a href="https://github.com/scrooloose/nerdtree/blob/master/doc/NERD_tree.txt" target="_blank" rel="external">https://github.com/scrooloose/nerdtree/blob/master/doc/NERD_tree.txt</a> [Splice]: <a href="https://github.com/sjl/splice.vim/blob/master/doc/splice.txt" target="_blank" rel="external">https://github.com/sjl/splice.vim/blob/master/doc/splice.txt</a></p>
<h2 id="Write!">Write!</h2><p>Now that you’ve see how some other plugins structured and wrote their documentation, fill in the sections for your Potion plugin.</p>
<p>If you’re not used to writing technical documentation this might be a challenge. Learning to write certainly isn’t simple, but like any other skill it definitely requires practice, so just go to it!  It doesn’t need to be perfect and you can always improve it later.</p>
<p>Don’t be afraid to write something you’re not completely sure about and then throw it away and rewrite it later.  Often just getting <em>something</em> in the buffer will get your mind in the mood to write.  It’ll still be in version control if you ever want it back any way.</p>
<p>A good way to start is to imagine you’ve got a friend who also uses Vim sitting next to you.  They’ve never used your plugin before but are intrigued, and your goal is to turn them into an expert user of it.  Thinking about explaining things to an actual human being will help keep you grounded and avoid getting too deeply technical before you’ve established a good overview of how things work.</p>
<p>If you’re still stuck and feel like you’re not up to the challenge of writing the documentation for a full plugin, try doing something smaller.  Pick a mapping in your <code>~/.vimrc</code> file and document it fully in a comment.  Explain what it’s for, how to use it, and how it works.  For example, this is in my own <code>~/.vimrc</code> file:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">" "</span>Uppercase word<span class="string">" mapping.</span><br><span class="line"></span></span><br><span class="line"><span class="string">"</span><br><span class="line"></span></span><br><span class="line"><span class="string">" This mapping allows you to press &lt;c-u&gt; in insert mode to convert the</span><br><span class="line"></span></span><br><span class="line"><span class="string">" current word to uppercase.  It's handy when you're writing names of</span><br><span class="line"></span></span><br><span class="line"><span class="string">" constants and don't want to use Capslock.</span><br><span class="line"></span></span><br><span class="line"><span class="string">"</span><br><span class="line"></span></span><br><span class="line"><span class="string">" To use it you type the name of the constant in lowercase.  While</span><br><span class="line"></span></span><br><span class="line"><span class="string">" your cursor is at the end of the word, press &lt;c-u&gt; to uppercase it,</span><br><span class="line"></span></span><br><span class="line"><span class="string">" and then continue happily on your way:</span><br><span class="line"></span></span><br><span class="line"><span class="string">"</span><br><span class="line"></span></span><br><span class="line"><span class="string">"                            cursor</span><br><span class="line"></span></span><br><span class="line"><span class="string">"                            v</span><br><span class="line"></span></span><br><span class="line"><span class="string">"     max_connections_allowed|</span><br><span class="line"></span></span><br><span class="line"><span class="string">"     &lt;c-u&gt;</span><br><span class="line"></span></span><br><span class="line"><span class="string">"     MAX_CONNECTIONS_ALLOWED|</span><br><span class="line"></span></span><br><span class="line"><span class="string">"                            ^</span><br><span class="line"></span></span><br><span class="line"><span class="string">"                            cursor</span><br><span class="line"></span></span><br><span class="line"><span class="string">"</span><br><span class="line"></span></span><br><span class="line"><span class="string">" It works by exiting out of insert mode, recording the current cursor</span><br><span class="line"></span></span><br><span class="line"><span class="string">" location in the z mark, using gUiw to uppercase inside the current</span><br><span class="line"></span></span><br><span class="line"><span class="string">" word, moving back to the z mark, and entering insert mode again.</span><br><span class="line"></span></span><br><span class="line"><span class="string">"</span><br><span class="line"></span></span><br><span class="line"><span class="string">" Note that this will overwrite the contents of the z mark.  I never</span><br><span class="line"></span></span><br><span class="line"><span class="string">" use it, but if you do you'll probably want to use another mark.</span><br><span class="line"></span></span><br><span class="line"><span class="keyword">inoremap</span> &lt;C-<span class="keyword">u</span>&gt; &lt;esc&gt;mzgUiw`za</span><br></pre></td></tr></table></figure>
<p>It’s much shorter than the documentation for a full plugin, but it’s a good exercise that will help you practice writing.  It’s also very helpful for people reading your <code>~/.vimrc</code> if you put it up on Bitbucket or GitHub.</p>
<h2 id="Exercises">Exercises</h2><p>Write the documentation for each section of the Potion plugin.</p>
<p>Read <code>:help help-writing</code> for help about writing help.</p>
<p>Read <code>:help :left</code>, <code>:help :right</code>, and <code>:help :center</code> to learn about three useful commands for getting your ASCII art perfect.</p>
<p><a href="53.html">« Previous</a><a style="float:right" href="55.html">Next »</a></p>

      
    </div>
    
  </div>
  
</article>


</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
	<div id="footer-info" class="inner">
	&copy; 2015 Yiming LU<br>
	Hosted on <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.
	</div>
  </div>
</footer>
    </div>
    
<script>
  var disqus_shortname = 'ymlu';
  
  var disqus_url = 'http://seasonsroad.com/LearnVimScriptTheHardWay/54.html';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

  </div>
</body>
</html>
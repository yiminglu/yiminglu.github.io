<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>SeasonsRoad</title>
    <link>https://seasonsroad.com/</link>
    <description>SeasonsRoad is the blog for interesting things happening around.</description>
    
    <lastBuildDate>Sun, 01 Mar 2020 00:10:00 +0800</lastBuildDate>
    <generator>Hugo v0.65.1</generator>
    <atom:link href="https://seasonsroad.com/feed.xml" rel="self" type="application/rss+xml" />
      <item>
        <title>HEVCify My Camera Videos</title>
        <link>https://seasonsroad.com/post/2020/hevcify-camera-videos.html</link>
        <pubDate>Sun, 01 Mar 2020 00:10:00 +0800</pubDate>
        <description><![CDATA[<p>I&rsquo;ve been creating camera videos a lot on my Android phone. I usually take 4K videos. However, recently the video has been occupying over 100GB size of total 256G. If I don&rsquo;t fix that, I can store no more things on my OnePlus 7 Pro.</p>
<p>I&rsquo;ve been thinking if I could select some of the videos and delete others. However, even all my videos/photos have backups on my OneDrive, I still need to watch the videos with my family from time to time. So I don&rsquo;t want to delete them.</p>
<p>In my first thought, the solutions could be, 1) buy a new phone 2) NAS / Network Attached Storage. However, my phone is functioning so well that I don&rsquo;t think I could find another phone that could be better (except OP7tPro). And for the second solution, I&rsquo;ve already got a network disk setup, the performance seems okay. However, it seems not okay to use NAS to watch videos. You know, long VST/VRT, high CIRR, and something VPF. ğŸ˜”</p>
<p>After several months with this pain in my head, a new idea came up to me. How about re-encoding the videos? Actually, I thought about compression. However, it seems not tolerable when the video is not clear any longer&hellip;</p>
<p>Another thought came to me that H.265/HEVC is <em>somehow</em> widely used. How about encode my videos to HEVC as lossless compression? Then I just installed <a href="https://play.google.com/store/apps/details?id=com.silentlexx.ffmpeggui&amp;hl=en_US">FFmpeg Media Encoder</a> from Google Play, and encoded one of my videos.</p>
<p>And then I was shocked by the result.. A video with 500M size is compressed into 70M. In case the video bit rate is not so good, I compared the videos for almost 10 times. And I don&rsquo;t see difference&hellip; Holly&hellip;</p>
<p>So, let&rsquo;s get started!</p>
<h2 id="on-the-phone">On the Phone</h2>
<h3 id="step-1">Step 1</h3>
<p>Try <a href="https://play.google.com/store/apps/details?id=com.silentlexx.ffmpeggui&amp;hl=en_US">FFmpeg Media Encoder</a> by your own to see if you could accept the long time for encoding.</p>
<h3 id="step-2">Step 2</h3>
<p>Select videos to encode.</p>
<h3 id="step-3">Step 3</h3>
<p>And you will lose the Exif metadata by default. To restore that, you could either try <a href="https://play.google.com/store/apps/details?id=com.exiftool.free&amp;hl=en_US">Exiftool</a> or <a href="https://video.stackexchange.com/a/26076">copy tags while encoding</a>.</p>
<h2 id="on-mac">On Mac</h2>
<p>However, It seems not very efficient on phone. Why not use my Mac? With my Mac, I could do more scripting and also I could process the video as a batch.</p>
<h3 id="step-1-1">Step 1</h3>
<p>ADB or Network ADB. <code>brew cask install android-platform-tools</code> to install <code>adb</code>.</p>
<p>For network ADB,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># while connecting the phone to mac</span>
adb tcpip <span style="color:#ae81ff">5555</span>

<span style="color:#75715e"># network adb connect</span>
adb connect 192.168.xxx.xxx:5555
</code></pre></div><h3 id="step-2-1">Step 2</h3>
<p>Pull the video files to Mac.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">adb pull /sdcard/DCIM/Camera/VID_20200202_020202.mp4
</code></pre></div><h3 id="step-3-1">Step 3</h3>
<p>Encode with <code>ffmpeg</code>. <code>brew install ffmpeg</code> to install <code>ffmpeg</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ffmpeg -i VID_20200202_020202.mp4 -c:v libx265 -c:a aac VID_20200202_020202_HEVC.mp4

<span style="color:#75715e"># if you want to customize the parameters, check the ffmpeg manual.</span>
man ffmpeg

<span style="color:#75715e"># or just</span>
ffmpeg
</code></pre></div><h3 id="step-4">Step 4</h3>
<p>Restore EXIF metadata with <code>exiftool</code> to copy original EXIF tags to the new video file. <code>brew install exiftool</code> to install <code>exiftool</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">exiftool -tagsFromFile VID_20200202_020202.mp4 VID_20200202_020202_HEVC.mp4
</code></pre></div><h3 id="step-5">Step 5</h3>
<p>Send video file back to phone.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">adb push VID_20200202_020202_HEVC.mp4 /sdcard/DCIM/
</code></pre></div><h3 id="step-6">Step 6</h3>
<p>Now compare these two videos.</p>
<h2 id="at-last">At last</h2>
<p>Now, it&rsquo;s been a while since the first encoding. And the result till now is pretty promising. At this moment, I&rsquo;ve got ~500M of videos files encoded from ~5G original video files.</p>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2020/hevcify-camera-videos.html</guid>
      </item><item>
        <title>è¿‡åº¦æ‹…å¿§</title>
        <link>https://seasonsroad.com/post/2019/over-concern.html</link>
        <pubDate>Mon, 09 Dec 2019 02:00:00 +0800</pubDate>
        <description><![CDATA[<p>ã€è‹¥è¦äººä¸çŸ¥ï¼Œé™¤éå·±è«ä¸ºã€‚ã€</p>
<p>å³ä¾¿éª—è¿‡äº†åˆ«äººï¼Œä¹Ÿéª—ä¸è¿‡è‡ªå·±ã€‚</p>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2019/over-concern.html</guid>
      </item><item>
        <title>Adding Dark Mode to the Blog</title>
        <link>https://seasonsroad.com/post/2019/adding-dark-mode.html</link>
        <pubDate>Fri, 06 Dec 2019 02:00:00 +0800</pubDate>
        <description><![CDATA[<h2 id="ä»£ç é‡ä¸å¤šæ•ˆæœå¾ˆå¤§">ä»£ç é‡ä¸å¤šï¼Œæ•ˆæœå¾ˆå¤§</h2>
<p>ç°åœ¨è§†è§‰èˆ’é€‚åº¦è¶Šæ¥è¶Šé‡è¦äº†ï¼Œæ— è®ºæ˜¯ Macã€Windowsã€iOS è¿˜æ˜¯ Android éƒ½æ·»åŠ äº†æš—å¤œæ¨¡å¼ï¼Œé‚£ç½‘ç«™ä¹Ÿå°±æ”¯æŒä¸€ä¸‹å§ï¼Œä¹Ÿä¸éº»çƒ¦ã€‚</p>
<p>åªæ˜¯ç®€å•çš„åŠ äº†å‡ ä¸ª CSS çš„ global å˜é‡ï¼Œé€šè¿‡ <code>prefers-color-scheme: dark</code> è¦†ç›–ä¸‹å°±ç›´æ¥ work äº†ã€‚</p>
<p>è¿‡ç¨‹ä¸­é‡æ–°æ¢³ç†äº†ä¸€ä¸‹å…¨å±€æ‰€æœ‰çš„é¢œè‰²ï¼Œåˆ†äº†ä¸€ä¸‹ç±»ï¼Œä»¥åæ”¹åŠ¨ä¹Ÿä¸å¿…éšä¾¿æ·»åŠ äº†ï¼Œæ‹¿æ¥å®šä¹‰å¥½çš„å°±å¯ä»¥ç›´æ¥ç”¨äº†ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™æ ·é¢œè‰²ä¹Ÿæ›´å®¹æ˜“ç»´æŠ¤äº†ã€‚</p>
<h2 id="before--after">Before &amp; After</h2>
<center>
<span><img src="/post/2019/adding-dark-mode/before.jpg" alt="Before" style="width: 320px; border: 1px solid black; margin: 10px;"/></span>
<span><img src="/post/2019/adding-dark-mode/after.jpg" alt="After" style="width: 320px; border: 1px solid white; margin: 10px;"/></span>
</center>
<h2 id="benefits">Benefits</h2>
<ul>
<li>Reduce Eye Strain</li>
<li>Improve Battery Life</li>
<li>It Looks Amazing!</li>
</ul>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2019/adding-dark-mode.html</guid>
      </item><item>
        <title>The Second Birthday</title>
        <link>https://seasonsroad.com/post/2019/the-2nd-birthday.html</link>
        <pubDate>Fri, 09 Aug 2019 03:00:00 +0800</pubDate>
        <description><![CDATA[<h2 id="ä¸€æ¬¡çªå¦‚å…¶æ¥çš„å®‰æ’">ä¸€æ¬¡çªå¦‚å…¶æ¥çš„å®‰æ’</h2>
<p>äººç”Ÿå°±æ˜¯è¿™æ ·ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½æ˜¯çªç„¶å‘ç”Ÿçš„ã€‚ä½†æ˜¯çœŸæ­£å¯¼è‡´è¿™ä»¶äº‹æƒ…å‘ç”Ÿçš„ä¸œè¥¿ï¼Œå´å­˜åœ¨äº†å¥½ä¹…å¥½ä¹…ã€‚</p>
<p>æˆ‘æ˜¯ä¸€ä¸ªæ‹æ—§çš„äººï¼Œæ‰€ä»¥ä¹Ÿå–œæ¬¢å‘†åœ¨ä¸€ä¸ªç†Ÿæ‚‰çš„åœ°æ–¹ã€‚</p>
<p>å½“ç„¶ï¼Œæ¯ä¸ªåœ°æ–¹éƒ½ä¸æ˜¯æ°¸ä¹…çš„ã€‚æˆ‘æ·±çŸ¥è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯ä¸€ç›´åœ¨ç­‰å¾…ä¸€ä¸ªèƒ½è§¦åŠæˆ‘ç¦»å»ç¥ç»çš„é‚£æ ·ä¸œè¥¿ã€‚ä½†æ˜¯ï¼Œç»†ç»†æƒ³æ¥ï¼Œå…¶å®å®ƒæ—©å°±å­˜åœ¨äº†ï¼Œæˆ‘å¯èƒ½åªæ˜¯å¿½ç•¥æ‰äº†ã€‚å…¶å®ï¼Œä»å»å¹´å†™ <a href="/post/2018/feelings-of-leaving.html">ã€The Feelings of Someone&rsquo;s Leavingã€</a> çš„æ—¶å€™ï¼Œå®ƒå°±åŸ‹åœ¨äº†æˆ‘çš„å¿ƒé‡Œï¼Œåªæ˜¯æˆ‘è¿˜ä¸ç¡®å®šï¼Œå½“ç„¶ä¹Ÿåœ¨å‡è£…æ·¡ç„¶ã€‚ç›´åˆ°å‡ ä¸ªæœˆå‰ï¼Œåˆæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„äººç¦»å¼€çš„æ—¶å€™ï¼Œæˆ‘æ‰æ„è¯†åˆ°å…¶å®è¿™é‡Œæœ‰å¾ˆå¤šé—®é¢˜ï¼Œæˆ‘åªæ˜¯æ‡’æƒ°äº†ï¼Œå¿½è§†äº†æ€ä¹ˆå»è§£å†³ã€‚</p>
<p>æ‰€ä»¥ï¼Œç¦»å¼€è¿™ä¸ªå†³å®šä¹Ÿæƒ³äº†å¾ˆä¹…ï¼Œæ¯•ç«Ÿæˆæœ¬è¿˜æ˜¯å¾ˆé«˜çš„ã€‚å‰æœŸçš„å‡†å¤‡è¿˜æ˜¯è¦æœ‰å¾ˆå¤šçš„ï¼Œä¸€æ­¥ä¸€æ­¥æ…¢æ…¢æ¥ï¼Œä¹Ÿæäº†å¥½å‡ ä¸ªæœˆæ‰åšå¥½å‡†å¤‡ã€‚ä½†çœŸå½“æˆ‘åœ¨è€ƒè™‘æ˜¯å¦è¦è¿ˆå‡ºä¸‹ä¸€æ­¥çš„æ—¶å€™ï¼Œæˆ‘å†æ¬¡çŠ¹è±«äº†ã€‚å› ä¸ºè¿™æ ·çœŸçš„æ˜¯è¦æŠŠè¿™ä¸ªæƒ³æ³•å…¬å¼€ç»™ä¸€äº›ä¸åœ¨è¿™ä¸ªåœ°æ–¹çš„äººï¼Œè€Œä¸æ˜¯åŸæ¥è‡ªå·±åŸ‹åœ¨å¿ƒåº•çš„æƒ³æ³•ã€‚</p>
<p>å·²ç»å¿˜å´äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¼šä¸‹å®šå†³å¿ƒè¿ˆå‡ºè¿™ä¸€æ­¥ï¼Œä½†æ˜¯æˆ‘ç¡®å®å¾®ä¿¡å‘å‡ºå»äº†ã€‚ä¹Ÿç­‰æ¥äº†å›å¤ï¼Œåé¢çš„äº‹æƒ…éƒ½å‘ç”Ÿçš„å¾ˆå¿«ã€‚çœŸçš„å¾ˆå¿«ï¼Œä¸åˆ°ä¸€å‘¨çš„æ—¶é—´é‡Œä¹Ÿæ”¶è·äº†ä¸€äº›ä¸œè¥¿ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸€åˆ‡éƒ½æ˜¯é‚£ä¹ˆçš„çªå¦‚å…¶æ¥ï¼Œä»¥è‡³äºï¼Œæœ¬æ¥ä¸æƒ³åœ¨ 08.08 å®‰æ’äº‹æƒ…çš„æˆ‘ä¹Ÿæ¥å—äº†å½“å¤©æ™šä¸Šçš„å®‰æ’ã€‚</p>
<h2 id="0808">ã€08.08ã€</h2>
<p>è¿™ä¸€å¤©çœŸçš„æŒºç´¯çš„ï¼Œå› ä¸ºçŸ¥é“æ™šä¸Šä¸èƒ½ä¸€èµ·é™ªé—ºå¥³åƒé¥­ï¼Œæ—©ä¸Šèµ·æ¥é™ªäº†å¥¹ç©å„¿ä¸€ä¼šã€‚</p>
<p>å¨ƒå¨ƒéƒ½æ˜¯è¿™ä¹ˆå¼€å¿ƒï¼Œä¸ç®¡æ˜¯ä¸æ˜¯ç”Ÿæ—¥ã€‚å¯èƒ½æœ€è¿‘ç»™å¥¹çŒè¾“äº†æ¯”è¾ƒå¤šäº†ï¼Œå¥¹ä¹Ÿæœ‰ä¸€äº›æ¦‚å¿µï¼ŒçŸ¥é“äº†ç”Ÿæ—¥å¿«ä¹æ­Œã€‚è¯å„¿ä¹Ÿå¯†äº†å¾ˆå¤šï¼Œæ—¶ä¸æ—¶è¿˜èƒ½èƒŒå‡ºæ•´é¦–è¯—æ¥ã€‚</p>
<p>çœŸæ˜¯ï¼Œä¸ç»æ„é—´ï¼Œå¥¹å°±é•¿å¤§äº†ã€‚</p>
<p>æƒ³æƒ³è¿™äº›ï¼Œå‘ç°ï¼Œäººç”ŸçœŸçš„æ˜¯ç¨çºµå³é€ã€‚è€Œä¸”ï¼Œå‘¨å›´åˆå…¨æ˜¯å¼•è¯±ä½ ï¼Œè¿›è€Œå ç”¨ä½ æ—¶é—´çš„ä¸œè¥¿ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œè‡ªæ§åŠ›æœ‰å¤šé‡è¦ã€‚ä½œä¸ºä¸€ä¸ªèƒ½å¤Ÿæ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œå´åˆåšä¸åˆ°çš„äººï¼Œæˆ‘è¿˜æœ‰å¾ˆå¤šè¿›æ­¥ç©ºé—´ã€‚</p>
<p>æ™šä¸Šçš„å®‰æ’ï¼Œä¸å‡ºæ„æ–™åˆ°äº†å¾ˆæ™šï¼Œæœ¬ä»¥ä¸ºé—ºå¥³éƒ½ç¡äº†ï¼Œç´¢æ€§åœ¨å°±åœ¨é‚£é‡Œåƒäº†ä¸€é¡¿é¥­ã€‚</p>
<p>èŠäº†å¾ˆä¹…ï¼Œæ„Ÿè§‰æœ‰äººè®¤å¯ï¼Œä¸”æ”¯æŒè‡ªå·±çš„æ„Ÿè§‰ï¼ŒçœŸçš„å¾ˆå¥½ã€‚</p>
<p>é©±è½¦å›å®¶ã€‚å‘ç°é—ºå¥³ä¸€å¦‚æ—¢å¾€çš„è¿˜åœ¨é—¹è…¾ï¼Œåªæ˜¯é—¹å¾—æ›´æ™šäº†ä¸€äº›ã€‚åˆšå¥½ï¼Œå°±è·Ÿå¥¹èŠäº†ä¸€ä¼šå„¿å¤©ã€‚é—ºå¥³çš„å§‘å§‘æ‰“æ¥ç”µè¯ï¼Œè¿˜æœ‰å¥¶å¥¶éƒ½èŠèŠå¤©ï¼Œå¤§å®¶éƒ½å¾ˆå¼€å¿ƒçš„ç¡ä¸‹äº†ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘å¹¶æ²¡æœ‰ç¡ï¼Œç»§ç»­æ”¾ç©ºå¤§è„‘ã€‚æ—©ç¡ï¼Œå¯¹æˆ‘çœŸçš„æŒºéš¾çš„ï¼Œæˆ‘éƒ½éœ€è¦ç”¨æ‰‹æœºçš„ç¦…å®šæ¨¡å¼æ‰èƒ½å¼€å¯ç¡çœ äº†ï¼Œè€Œä¸”å¾ˆå¤šæ—¶å€™éƒ½ä¸èƒ½æŒ‰æ—¶å¼€å¯ç¦…å®šæ¨¡å¼ã€‚ä½†æ˜¯ï¼Œä¸ºäº†å¥åº·å’Œå®¶åº­ï¼Œä»¥åå·¥ä½œç»“æŸäº†ï¼Œè¿˜æ˜¯åº”è¯¥å°½æ—©ç¡ä¸‹ã€‚</p>
<h2 id="æ›´å¤šçš„0808">æ›´å¤šçš„ã€08.08ã€</h2>
<p>äººç”Ÿçš„è®¾å®šå°±æ˜¯è¿™æ ·ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œé”™è¿‡äº†è¿˜æœ‰ä¸‹æ¬¡ã€‚</p>
<p>åªå¸Œæœ›ï¼Œä»¥åçš„è¿™å¤©ï¼Œä¸ä¼šåˆšåˆšå¥½åœ¨å…³é”®èŠ‚ç‚¹ä¸Šã€‚å·¥ä½œå›ºç„¶æ˜¯å¾ˆé‡è¦çš„ï¼Œä½†é™ªä¼´å®¶åº­æ‰æ˜¯æœ€é‡è¦çš„ã€‚</p>
<h2 id="çˆ¶æ¯ä¸å­å¥³">çˆ¶æ¯ä¸å­å¥³</h2>
<p>è·Ÿå¦»å­èŠè¿‡å¾ˆå¤šæ¬¡è¿™ä¸ªè¯é¢˜ï¼Œæœ€åæ”¶è·çš„ç»“è®ºéƒ½æ˜¯ä¸€æ ·ã€‚çˆ¶æ¯ä¸å­å¥³çš„å…³ç³»æœ€ç»ˆéƒ½æ˜¯ä¸€æ®µè¦åˆ†ç¦»çš„å…³ç³»ï¼Œæ— è®ºæ˜¯å°†æ¥é•¿å¤§ä¸Šå­¦ï¼Œæˆç«‹å®¶åº­ï¼ŒæŠ‘æˆ–æ˜¯çˆ¶æ¯ç™¾å¹´ï¼Œæ€»æ˜¯ä¼šåˆ†å¼€ã€‚</p>
<p>ä½†æˆ‘ä»¬ä¸æ˜¯æ‚²è§‚è®ºè€…ï¼Œåœ¨é‚£äº›äº‹æƒ…å‘ç”Ÿä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¤§æŠŠå¤§æŠŠçš„æ—¶é—´ï¼Œå¯ä»¥äº’ç›¸é™ªä¼´ï¼Œä¸€èµ·äº«å—ç”Ÿæ´»ã€‚å½“ç„¶ï¼Œäº«å—ç”Ÿæ´»è¿˜æ˜¯è¦ç‰ºç‰²ä¸€äº›ä¸œè¥¿çš„ï¼Œæ¯”å¦‚çˆ¶æ¯çš„æ—¶é—´ï¼Œæ¯•ç«Ÿè¦æ’‘èµ·ä¸€ä¸ªå®¶ã€‚</p>
<h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2>
<p>è¿™éƒ½æ˜¯é—ºå¥³ä¸¤å²ç”Ÿæ—¥çš„è¿™æ®µæ—¶é—´å‘ç”Ÿçš„ä¸€ç³»åˆ—äº‹æƒ…ï¼Œä»¥åŠæˆ‘ä¸ªäººçš„ä¸€ç³»åˆ—è”æƒ³ã€‚</p>
<p>äººç”Ÿè¦ç»§ç»­ï¼Œä¸Šè¡Œè¿˜æ˜¯ä¸‹è¡Œï¼Œéƒ½æ˜¯è‡ªå·±çš„é€‰æ‹©ã€‚æˆ–è€…è¯´ï¼Œè‡³å°‘æˆ‘è¿˜èƒ½åšé€‰æ‹©ã€‚</p>
<p><br />
<br /></p>
<p>æ³¨ï¼š</p>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰éƒ½èƒ½å¦‚æ„ï¼Œæ¯•ç«Ÿæœ‰çš„æ—¶å€™è¿˜æ˜¯çœ‹å‘½çš„ã€‚è‡ªå·±çš„åŠªåŠ›ä¸åˆ°ä½ï¼Œä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¤šçš„é—æ†¾ã€‚æ¯•ç«Ÿï¼Œå¤‡é€‰æ–¹æ¡ˆå¤ªè®©äººè§‰å¾—å®‰å…¨äº†ã€‚ã€‚</p>
<p>æƒ³æ¥ï¼Œæ–°çš„ä¸€å¹´åˆè¦åˆ°æ¥äº†ã€‚æ‰€ä»¥ï¼Œè¿˜æ˜¯è¦å¥½å¥½å‡†å¤‡ä¸‹çš„ã€‚</p>
<p>2019.12.09</p>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2019/the-2nd-birthday.html</guid>
      </item><item>
        <title>The Feelings of Someone&#39;s Leaving</title>
        <link>https://seasonsroad.com/post/2018/feelings-of-leaving.html</link>
        <pubDate>Sat, 24 Nov 2018 00:00:00 +0800</pubDate>
        <description><![CDATA[<h2 id="ç›´åˆ°è¦èµ°äº†æ‰è§‰å¾—ä¸èˆå¾—">ã€ç›´åˆ°è¦èµ°äº†ï¼Œæ‰è§‰å¾—ä¸èˆå¾—ã€</h2>
<p>æœ‹å‹åœ¨åƒå®Œæœ€åä¸€é¡¿é¥­åè·Ÿæˆ‘è¯´çš„è¯ã€‚æ•£ä¼™é¥­éƒ½æ˜¯è¿™æ ·å§ï¼Œå°½é‡ä¸ä¼¤æ„Ÿï¼Œä½†æ˜¯ä¹Ÿæ‹¦ä¸å¾—åˆ«äººå¥”å‘è‡ªå·±çš„å¤§å¥½å‰ç¨‹ã€‚</p>
<p>è¿™ä¸ªæœ‹å‹ï¼Œç°åœ¨ä¹Ÿå¯ä»¥å«å‰åŒäº‹äº†ï¼Œè¿˜æ˜¯è›®å‰å®³çš„ã€‚è€Œä¸”ä»–ä¹Ÿå¾ˆç‰¹åˆ«ï¼Œç‰¹åˆ«åˆ°è®©ä½ è§‰å¾—ä»–æœ‰ç‚¹ã€äºŒã€ã€‚å¹³æ—¥é‡Œå‡ºå»åƒé¥­ï¼Œä½ ä¼šè§‰å¾—ä»–è¯´è¯éƒ½æ— æ³•è®©å…¨æ¡Œäººå¬æ¸…æ¥šï¼Œç„¶è€Œï¼Œä»–å´åƒã€Œäº¤é™…èŠ±ã€ä¸€èˆ¬çš„å­˜åœ¨ï¼Œå…¬å¸å¾ˆå¤šæ–°æ¥çš„äººéƒ½èƒ½ä¸ä»–äº¤æƒ…ä¸é”™ã€‚è€Œåè§‚è‡ªå·±ï¼Œç”šè‡³è¿˜ä¸çŸ¥é“è¿™äº›äººçš„åå­—ã€‚</p>
<p>è¯´åˆ°è¿™é‡Œï¼Œæä¸€ä»¶äº‹ã€‚ç°åœ¨çš„æˆ‘ï¼Œå·¥ä½œè¿˜æ˜¯ä¸€æ ·åŠªåŠ›ï¼Œä½†æœ‰äº›æ–¹å‘å´çœ‹æ·¡äº†ã€‚åŸæ¥ï¼Œæˆ‘ä¼šç»†å¿ƒè®°å¾—æ¯ä¸ªåŒäº‹çš„åå­—ï¼Œè™½ç„¶ï¼Œå¯èƒ½æ˜¯å› ä¸ºå…¬å¸çš„äººä¹Ÿä¸å¤šå§ã€‚è€Œç°åœ¨ï¼Œå…¬å¸å¤§äº†ï¼Œäººå¤šäº†ï¼Œæˆ‘å´è§‰å¾—æ— æ‰€è°“äº†ã€‚ç¢°é¢çœŸçš„æœ‰å¿…è¦æ‰“æ‹›å‘¼å—ï¼Ÿè¿™ç¡®å®æ˜¯ä¸€ä¸ªé—®å·ã€‚æˆ–è€…è¿™åˆæ˜¯ä¸€ä¸ªä¿¡å·ï¼Œå‘Šè¯‰æˆ‘äººæƒ…ä¸æ˜¯æˆ‘çš„ç‰¹é•¿ï¼Ÿ</p>
<h2 id="èŠèŠè–ªæ°´å§">ã€èŠèŠè–ªæ°´å§ã€</h2>
<p>è–ªæ°´æ˜¯ä¸´èµ°çš„æ—¶å€™éƒ½é¿ä¸å¼€çš„è¯é¢˜ï¼Œè‡³å°‘å¯¹æˆ‘ä»¬è¿™äº›è¿˜å¹´è½»ã€å¯¹åˆ«äººè¿˜æ²¡æœ‰ç‰¹åˆ«å¤šæˆ’å¤‡å¿ƒçš„äººã€‚</p>
<p>ã€åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘è§‰å¾—è‡ªå·±æŒ£å¾—å¾ˆå¤šã€‚çœ‹äº†ä¸€äº›æ‹›è˜ç½‘ç«™ï¼Œä»–ä»¬è¦æ±‚é‚£ä¹ˆå¤šï¼Œéœ€è¦å·¥é¾„å¾ˆä¹…ï¼Œå·¥èµ„æ‰ç»™ 10k åˆ° 20kï¼Œå¤šçš„ä¹Ÿä¸è¿‡ 30kã€‚ã€æœ‹å‹è¿™ä¹ˆè¯´ï¼Œè¿˜ä¸æ–­çš„åŠ ä¸€äº›ã€çœŸçš„ã€æ¥å¼ºè°ƒè¿™å°±æ˜¯çœŸå®çš„æƒ³æ³•ã€‚</p>
<p>æˆ‘è¿å¿™è§£é‡Šé“ï¼Œäººæ˜¯ä¼šæ‡’æƒ°çš„ã€‚è¿‡äº†ä¸€äº›å¹´ï¼Œè¿™äº›äººè¾¾åˆ°äº†ä»–ä»¬çš„è¦æ±‚ï¼Œå¹´å¤´è¶³å¤Ÿäº†ï¼Œç„¶è€Œæ°´å¹³å…¶å®å¾ˆçƒ‚ï¼Œlevelæ ¹æœ¬è¾¾ä¸åˆ°ã€‚å·¥é¾„ï¼Œä¸è¿‡æ˜¯æ··æ—¥å­ç½¢äº†ã€‚</p>
<p>å…¶å®ï¼Œæƒ³æƒ³è‡ªå·±çš„ä¼˜åŠ¿åˆæ˜¯ä»€ä¹ˆï¼Ÿéš¾é“åªæ˜¯å¹´è½»ï¼Œå­¦ä¹ èƒ½åŠ›å¼ºï¼Ÿ</p>
<p>æœ‹å‹å‘Šè¯‰äº†æˆ‘ä»– double äº†è‡ªå·±çš„è–ªæ°´ï¼Œæˆ‘è¯´çœŸçš„å¾ˆå‰å®³å•Šã€‚å…¶å®æƒ³æƒ³çœŸçš„æ˜¯å¾ˆå¥½äº†ï¼Œä¸ç®¡å°†æ¥çš„ç»“æœæ˜¯æ€æ ·çš„ï¼Œé’±åˆ°æ‰‹é‡Œäº†æ‰æ˜¯çœŸçš„ã€‚åè§‚è‡ªå·±ï¼Œå·¥ä½œåŠªåŠ›äº†è¿™ä¹ˆå¤šå¹´ï¼Œå·¥èµ„è¿˜æ²¡æœ‰å¼€å§‹æ—¶å€™çš„ doubleï¼Œå¿ƒé‡Œä¹Ÿæ˜¯å¯’å¯’çš„ã€‚</p>
<h2 id="èµ¶å¿«å»åšç®—æ³•å§">ã€èµ¶å¿«å»åšç®—æ³•å§ã€</h2>
<p>è¿™ä¸ªæœ‹å‹ä¹‹å‰å¤šæ¬¡è·Ÿæˆ‘æèµ·è¿™ä»¶äº‹ï¼Œè¯´ä»–çš„å¥½å‡ ä¸ªåŒå­¦ç‰¹åˆ«èƒ½æ„Ÿè§‰åˆ°æ—¶ä»£çš„éœ€æ±‚ï¼Œåˆšåˆšå·¥ä½œå°±è½¬è¡Œå»åš AI äº†ã€‚ä»–è¯´ç°åœ¨è·Ÿä»–ä»¬èŠèµ·æ¥ï¼Œè–ªæ°´éƒ½æ˜¯ä»–çš„ä¸¤å€ä»¥ä¸Šã€‚è¯´ä»–ä»¬è½¬è¡Œäº†åŠå¹´å°±å·²ç»é£ç”Ÿæ°´èµ·äº†ã€‚å¬èµ·æ¥æ„Ÿè§‰æœ‹å‹ç‰¹åˆ«å‘å¾€ã€‚</p>
<p>æœç„¶ï¼Œè¿™æ¬¡è·³æ§½ï¼Œä»–è„±ç¦»äº†è‡ªå·±çš„å‰ç«¯é¢†åŸŸã€‚</p>
<h2 id="è¿™éƒ½æ˜¯å›´åŸ">ã€è¿™éƒ½æ˜¯å›´åŸã€</h2>
<p>è¿™æ˜¯å¦å¤–ä¸€ä¸ªæœ‹å‹è·Ÿæˆ‘èŠå¤©çš„æ—¶å€™è¯´çš„ã€‚</p>
<p>è¿™ä½æœ‹å‹æ›¾ç»åœ¨ Googleï¼Œä»–åº”è¯¥æ˜¯æˆ‘åœ¨æ ¡å›­é‡Œè§è¿‡æœ€åŠªåŠ›çš„ä¸€ä¸ªäººäº†ï¼Œæ²¡æ—¥æ²¡å¤œçš„åŠªåŠ›å­¦ä¹ ï¼Œæœ€ç»ˆå‡ºå›½ CMUï¼Œé¡ºåˆ©è¿›å…¥ Googleã€‚å½“ç„¶è¿™ä¹Ÿæ˜¯æ„æ–™ä¹‹ä¸­çš„ã€‚å¥½åƒå‡ºå›½çš„åŒå­¦é‡Œé¢åªè¦æ˜¯ç§‘ç­å‡ºèº«çš„ï¼Œéƒ½å»äº† FANG äº†ã€‚</p>
<p>ä»–è¯´è¿™å¥è¯çš„æ—¶å€™ï¼Œæ˜¯å‡ å¹´å‰æˆ‘è·Ÿä»–èŠå¤©ï¼Œé—®äº†ä»–æœ‰ä»€ä¹ˆæ‰“ç®—çš„æ—¶å€™ã€‚ä»–ç°åœ¨å›å›½äº†ï¼Œåœ¨ç™¾åº¦åš AIï¼Œè¿˜æ²¡æœ‰æœºä¼šè·Ÿä»–åƒä¸ªé¥­ï¼ŒèŠèŠè¿‘å†µã€‚</p>
<p>è¿™ä¹Ÿè®¸å°±æ˜¯å¤§å¤šæ•°äººçš„é—®é¢˜æ‰€åœ¨ï¼Œè§‰å¾—åˆ«äººçš„éƒ½æ˜¯å¥½çš„ï¼Œçœ‹åˆ°çš„éƒ½æ˜¯è‡ªå·±å„ç§å„æ ·çš„é—®é¢˜ã€‚å…´è®¸ï¼Œåˆ«äººçš„ä¹Ÿä¸æ€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2>
<p>ä¹‹å‰è§‰å¾—åªæœ‰è¾“äº†çš„äººæ‰ç¦»å¼€äº†ï¼Œç°åœ¨åè€Œè§‰å¾—ç•™ä¸‹çš„äººæ‰æ˜¯è¾“äº†ã€‚å¯æ˜¯ï¼Œè½¬å¿µä¸€æƒ³ï¼Œä»–ä»¬æ€ä¹ˆèƒ½ç®—æ˜¯è¾“äº†ï¼Ÿ</p>
<p>æˆ–è€…å…¶å®è¾“çš„åªæœ‰è‡ªå·±ï¼Ÿ</p>
<p>å…¬å¸åˆ°åº•ç®—ä»€ä¹ˆï¼Ÿç¬¬ä¸€å®¶å…¬å¸åˆç®—ä»€ä¹ˆï¼Ÿåˆ°åº•ç•™æ‹çš„æ˜¯ä»€ä¹ˆï¼Ÿå¯èƒ½æˆ‘åœ¨å¿ƒç†ä¸Šè¿˜ç®—å¹´è½»å§ï¼Œä¸€ä»½å·¥ä½œåœ¨åˆ«äººçœ¼ä¸­å¯èƒ½åªæ˜¯ä¸€ä¸ªè¸è„šçŸ³ï¼Œè¸è¿‡å»å°±æ˜¯ä¸‹ä¸€ä¸ªã€‚</p>
<p>ä¸è¿‡ï¼Œäººä¸ä¹Ÿéƒ½åœ¨æˆé•¿ï¼Ÿå°±åƒæˆ‘ä¹‹å‰è¯´çš„ï¼Œæˆ‘ä¹Ÿçœ‹æ·¡äº†ä¸€äº›ã€‚</p>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2018/feelings-of-leaving.html</guid>
      </item><item>
        <title>Migrate the Blog to HTTPS</title>
        <link>https://seasonsroad.com/post/2018/migration-to-https.html</link>
        <pubDate>Wed, 07 Nov 2018 00:00:00 +0800</pubDate>
        <description><![CDATA[<p>I have this idea for a long time when we migrate <a href="https://www.hulu.com/">hulu.com</a> to https.</p>
<p>I tried a few other free cert signature solution. None of them works very well. When I saw <a href="https://letsencrypt.org/">Let&rsquo;s Encrypt</a> a few days ago, I had the same idea. I was firstly attracted by the design of the main site of Let&rsquo;s Encrypt. So, I decided to give it a try.</p>
<p>With the easy steps of <a href="https://certbot.eff.org/">certbot</a>, I configured my VPS with Nginx on Ubuntu 16.04. It was so easy to use certbot to renew the certificates automatically. With the support of certbot, I could do it once and for all. It&rsquo;s really a good solution.</p>
<p>And now my site is fully secured.</p>
<center><p><img src="/post/2018/migration-to-https/cert.png" alt="The Cert" style="width: 485px;"/></p></center>
<p>All of a sudden, my blog goes https. It now looks really nice. At least, Chrome won&rsquo;t say it&rsquo;s unsecure. ğŸ˜‚</p>
<center><p><img src="/post/2018/migration-to-https/secure.png" alt="Secure" style="width: 333px;"/></p></center>
<p><br /></p>
<p>P.S.</p>
<p>I even updated my blog to the same style.</p>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2018/migration-to-https.html</guid>
      </item><item>
        <title>The Blog as a PWA</title>
        <link>https://seasonsroad.com/post/2018/pwa-integration.html</link>
        <pubDate>Wed, 08 Aug 2018 00:00:00 +0800</pubDate>
        <description><![CDATA[<h2 id="what-is-pwa">What is PWA</h2>
<p><strong>PWA</strong> is short for <strong>Progressive Web Applications</strong>. If you want to learn more about the basics of PWA, go check the <a href="https://developers.google.com/web/progressive-web-apps/">Google PWA official website</a>.</p>
<p>Also, I did a brief intro to PWA in the CORP as tech share a while before. The content mainly comes from the PWA official site and the <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/">offline cookbook</a>. Check it out if you desire.</p>
<div class="with-ratio ratio-w5h3" style="max-width: 700px;"><div class="content"><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vQD3Q6gdHlqp7DSfzXlV5cLFhRTjGmXSqhT1xVjbT8hDgvohWR4pQgy01Bmh2w5XoYQSxyvNbw5O34y/embed?start=false&loop=false&delayms=3000" frameborder="0" width="100%" height="100%" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe></div></div>
<h2 id="apply-pwa-features-to-the-blog">Apply PWA Features to The Blog</h2>
<p>I want to apply these beautiful PWA features to the blog, so that I can add the app to my home screen and browse the blogs offline. Now, let&rsquo;s go through how to do that step-by-step.</p>
<h3 id="first-of-all-generate-the-service-worker-javascript">First of all, Generate the Service Worker JavaScript</h3>
<ul>
<li>
<p>I need to generate the <strong>Service Worker JavaScript</strong>, <code>sw.js</code>, with all my content and pre-cache the pages into the cache. This way, when service worker is installed, everything has been pre-cached. It will enable the full off-line mode by all the pre-cached files. This is the so-called <strong>install</strong> step of PWA life-circle.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">cacheName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;sr-precache-##REVISION##&#39;</span>;

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">PrecacheList</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">##</span><span style="color:#a6e22e">PRECACHE_LIST</span><span style="color:#960050;background-color:#1e0010">##</span>;

<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;install&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;[SW] Install&#39;</span>);
  <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">waitUntil</span>(
    <span style="color:#a6e22e">caches</span>.<span style="color:#a6e22e">open</span>(<span style="color:#a6e22e">cacheName</span>).<span style="color:#a6e22e">then</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">cache</span>) {
      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;[SW] Caching all files.&#39;</span>);
      <span style="color:#a6e22e">cache</span>.<span style="color:#a6e22e">addAll</span>(<span style="color:#a6e22e">PrecacheList</span>);
      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;[SW] SkipWaiting&#39;</span>);
      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">skipWaiting</span>();
    })
  );
});
</code></pre></div><p>There will be a post-build script to replace <code>##PRECACHE_LIST##</code> with the files in my <code>public</code> folder after I generated my site. The script will also replace <code>##REVISION##</code> with the git sha of <code>origin/master</code>.</p>
<p>Also, as you can see, there is a command <code>self.skipWaiting()</code> to tell SW to skip waiting, meaning the service worker activates as soon as it&rsquo;s finished installing, even for updating.</p>
</li>
<li>
<p>Then, I would want SW to use these pre-cached files for the requests. So I added lines to customize the <strong>fetch</strong> event in <code>sw.js</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;fetch&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
  <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">respondWith</span>(
    <span style="color:#a6e22e">caches</span>.<span style="color:#a6e22e">match</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">request</span>).<span style="color:#a6e22e">then</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">response</span>) {
      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">request</span>);
    })
  );
});
</code></pre></div><p>This is a very basic cache strategy, serving from cache and then network, a.k.a, <strong>cache-first</strong>.</p>
</li>
<li>
<p>After the steps above, the web app now works when offline. However, there are still issues.</p>
<ul>
<li>The cache will be invalid after I update the site, I need to remove the invalid cache.</li>
<li>SW will wait for all the tabs to close so that the new <code>sw.js</code> could apply to the tabs.</li>
</ul>
<p>So, I need to update the <strong>activate</strong> step so that I can fix these issues.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;activate&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;[SW] Activate&#39;</span>);
  <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">waitUntil</span>(
    <span style="color:#a6e22e">caches</span>.<span style="color:#a6e22e">keys</span>().<span style="color:#a6e22e">then</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">keyList</span>) {
      <span style="color:#66d9ef">return</span> Promise.<span style="color:#a6e22e">all</span>(<span style="color:#a6e22e">keyList</span>.<span style="color:#a6e22e">map</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">key</span>) {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">key</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">cacheName</span>) {
          <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;[SW] Removing old cache&#39;</span>, <span style="color:#a6e22e">key</span>);
          <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">caches</span>.<span style="color:#66d9ef">delete</span>(<span style="color:#a6e22e">key</span>);
        }
      }));
    })
  );
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">clients</span>.<span style="color:#a6e22e">claim</span>();
});
</code></pre></div><p>Since every update will change the git sha, I will get a unique new sha whenever there is an update. Then I just need to delete caches which is not the latest one.</p>
<p>Also, with <code>self.clients.claim()</code>, I can take control of uncontrolled clients/tabs within my service worker once it&rsquo;s activated.</p>
</li>
</ul>
<p>With all these steps above, the basic <code>sw.js</code> is initialized.</p>
<h3 id="lets-register-the-service-worker-javascript">Let&rsquo;s Register The Service Worker JavaScript</h3>
<p>It&rsquo;s easy to do this. Just test the browser to see if it supports SW, and register if so.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#39;serviceWorker&#39;</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">navigator</span>) {
  <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">serviceWorker</span>.<span style="color:#a6e22e">register</span>(<span style="color:#e6db74">&#39;/sw.js&#39;</span>).<span style="color:#a6e22e">then</span>(<span style="color:#66d9ef">function</span>(){
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Service Worker Registered&#39;</span>);
  });
}
</code></pre></div><h3 id="create-the-web-app-manifest">Create The Web App Manifest</h3>
<p>The <a href="https://developers.google.com/web/fundamentals/web-app-manifest/">web app manifest</a> is a simple JSON file that tells the browser about your web application and how it should behave when &lsquo;installed&rsquo; on the user&rsquo;s mobile device or desktop. Having a manifest is required by Chrome to show the <strong>Add to Home Screen</strong> prompt.</p>
<ul>
<li>Add <code>name</code> &amp; <code>short_name</code>
<ul>
<li>The <code>name</code> is used in the <strong>Add to Home Screen</strong> prompt, while the <code>short_name</code> is used as the app name after being added to home screen.</li>
</ul>
</li>
<li>Add Icons
<ul>
<li>Ah.. I just used the <code>Preview</code> app on Mac to create my PNG icons.</li>
</ul>
</li>
<li>Add <code>start_url</code> &amp; <code>scope</code>
<ul>
<li>The <code>start_url</code> is the url when the app is launched as a fresh start after being added to home screen.</li>
</ul>
</li>
<li>Add <code>backgrou_color</code> &amp; <code>theme_color</code>
<ul>
<li>These two will affect the Android Chrome header color and the app splash screen after being added to home screen.</li>
</ul>
</li>
<li>Add <code>display</code>
<ul>
<li>If you want the immersive experience, try <code>standalone</code>(with only status bar) or even <code>fullscreen</code>(no status bar).</li>
</ul>
</li>
</ul>
<p>Now, let&rsquo;s register this configuration file in the <code>&lt;head&gt;</code> tag of all the pages.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;manifest&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/manifest.json&#34;</span>&gt;
</code></pre></div><h3 id="it-is-not-enough-yet">It is NOT Enough, Yet</h3>
<ul>
<li>
<p>For iOS</p>
<p>As we all know, PWA is not an Android only feature, it also works on iOS with iOS 11.3. However, you can barely find it on <a href="https://support.apple.com/en-bn/HT208067#113">iOS 11.3 release notes</a>, even Google says <a href="https://medium.com/@firt/progressive-web-apps-on-ios-are-here-d00430dee3a7#b0e7">PWA is firstly introduced by Steve Jobs</a>. And in this medium post, there are a huge ton of useful information about PWA on iOS.</p>
<ul>
<li>The Icons for iOS
<ul>
<li>If you are looking for Apple official doc, <a href="https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html">here it goes</a>.</li>
</ul>
</li>
<li>The Splash Screen for iOS
<ul>
<li>Check more details <a href="https://medium.com/appscope/adding-custom-ios-splash-screens-to-your-progressive-web-app-41a9b18bdca3">here</a></li>
<li><a href="https://appsco.pe/developer/splash-screens">Splash Screen Genertor</a></li>
</ul>
</li>
<li>Status Bar Style
<ul>
<li>More details <a href="https://dev.to/oskarlarsson/designing-native-like-progressive-web-apps-for-ios-510o">here</a></li>
</ul>
</li>
</ul>
<p>Why Google and Apple always do the same thing in a different way? And why Google is doing the standard way and Apple is doing the non-standard way? (Or, at least Google is making his way the standard way. This is the reason why we need to be open, instead of locking ourselves into a cage which looks big, but will become smaller and smaller.)</p>
</li>
<li>
<p>Client Tracking</p>
<p>With Google Analytics, I can track my blog visits very easily. Google has done really nice shits. (PWA is one of the shits!)</p>
</li>
<li>
<p>Local Dev</p>
<p>Actually, when you initialized the PWA, you don&rsquo;t need it for dev mode when writing posts or updating blog styles. The cache will breake some functions of the auto-reload logic.</p>
</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>So, here it comes, the PWA for the blog.</p>
<center><p><img src="/post/2018/pwa-integration/pwa.gif" alt="The Blog PWA" style="width: 320px; border: 1px solid black;"/></p></center>
<p>PWA is going to change rules of the game, hopefully, if and only if it will be more and more improved and applied. And it did really pushing the web to the next milestone.</p>
<p>PS:</p>
<p>This is not a post to praise Google. Actually, Apple is also doing great. A lot of people love iPhones. BTW, I love Mac. Even Microsoft is trying its best to serve bests apps on iOS/Android, when WinPhone has been dying.</p>
<p>I mean, every company has its good side, and bad side as well. Maybe they are saying &ldquo;don&rsquo;t be evil&rdquo;, while they are doing the evilest things.</p>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2018/pwa-integration.html</guid>
      </item><item>
        <title>Single Point of Truth</title>
        <link>https://seasonsroad.com/post/2016/spot.html</link>
        <pubDate>Fri, 18 Nov 2016 00:00:00 +0800</pubDate>
        <description><![CDATA[<p>Last afternoon, we encountered a bit of down time on our site. Before anybody told us, we didn&rsquo;t even know what&rsquo;s going on.</p>
<p>We did a deployment for just dark launch of some feature, and it is supposed not to break anything or affect any User Experience. After that, we fixed a small bug and did another deployment. Then we did some sanity check and made it a successful deployment. After that, we continued working on other things.</p>
<p>We didn&rsquo;t know anything before one colleague from US side HipChated us, that a lot of users reported that they can&rsquo;t even open our site, and see some JavaScript error. The colleague also shot us a <a href="http://downdetector.com/status/hulu">link</a>.</p>
<center><p><img src="/post/2016/spot/problems.png" alt="Reported problems" style="width: 392px;"/></p></center>
<p>WTF? Java(Script) error?</p>
<center><p><img src="/post/2016/spot/comments-1.jpg" alt="Comments on the down detector page" style="width: 485px;"/></p></center>
<center><p><img src="/post/2016/spot/comments-2.jpg" alt="Comments on the down detector page" style="width: 485px;"/></p></center>
<center><p><img src="/post/2016/spot/comments-3.jpg" alt="Comments on the down detector page" style="width: 485px;"/></p></center>
<center><p><img src="/post/2016/spot/comments-4.jpg" alt="Comments on the down detector page" style="width: 485px;"/></p></center>
<p>One thing occurred to me that, most time for our site, JavaScript error means missing asset. But we still cannot believe this is true.</p>
<p>From the down detector, we find that most problems are from East Coast. So it might be something wrong with one of our data centers.</p>
<center><p><img src="/post/2016/spot/geo-impact.png" alt="Geo Impact" style="width: 917px;"/></p></center>
<p>So I connected to our VPN for this data center, and opened our site, and find that there is one JS 404, just like I guessed.</p>
<center><p><img src="/post/2016/spot/missing-asset.png" alt="Missing asset" style="width: 867px;"/></p></center>
<p>I quickly copied things so that it works again. The down time is over.</p>
<p>But I wonder why. Why can&rsquo;t I find the asset?? We dig into that, only to find that the built outputs are different in different data centers. We did a diff and find that there is a value not the same in the huge JS file, which causing the JS manifest/md5 not the same. So I know the reason.</p>
<p>We did compilation on different servers with Nginx, and copy the built assets into the local folder to be directly served by Nginx. The output of the compilation contains 2 part: JS part and rails server part.</p>
<p>And during the compilation, there is a backend call encountered inconsistency issue in different data centers. And they get different values back which is built into the JS part. But we only use only one data center as the running rails server, they just trying to get the assets built in its manifest list which does not exist in other data centers.</p>
<p>From this incident, we know that:</p>
<ul>
<li>We are trying to do SPOT, b/c we have rails server part done with SPOT.</li>
<li>We should have done better and have JS part done with SPOT.</li>
</ul>
<p>Nowadays, more and more systems are distributed. Single Point of Truth becomes so important. If you haven&rsquo;t done it well for your distributed systems, you might encounter unexpected disasters one day as we had..</p>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2016/spot.html</guid>
      </item><item>
        <title>Connect IPv6 with IPv4 via tunnel</title>
        <link>https://seasonsroad.com/post/2015/connect-ipv6.html</link>
        <pubDate>Sun, 27 Sep 2015 00:00:00 +0800</pubDate>
        <description><![CDATA[<p>With IPv6 you can do a lot of things. This is a how-to article for users who only have IPv4 and want to connect IPv6.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>You should have a public address that&rsquo;s ping reachable.</li>
</ul>
<h2 id="steps-to-connect">Steps to connect</h2>
<ol>
<li>
<p>Register to <a href="http://www.tunnelbroker.net/">Tunnel Broker</a> and login this website.</p>
</li>
<li>
<p>Click &lsquo;Create Regular Tunnel&rsquo; link inside User Functions panel below Account Menu.</p>
</li>
<li>
<p>Configure your tunnel and create it.</p>
<ul>
<li>IPv4 Endpoint is the v4 IP you used to connect Internet. (Remember the IP you use, take it as &lsquo;PUBLIC-IP&rsquo;.)</li>
<li>If you&rsquo;re inside NAT or router, you can try to use Baidu/Google and search IP. Then you&rsquo;ll know your IP address. Usually, you can use the IP under the input box.</li>
<li>Make sure your IP is ping reachable. Or Tunnel Broker won&rsquo;t create any tunnel for you.</li>
<li>Try to choose a server that&rsquo;s nearest to you. However, you can just choose one you like if you have no idea which is nearer.</li>
</ul>
</li>
<li>
<p>Once you create a tunnel, you&rsquo;ll get the Tunnel Details panel.</p>
</li>
<li>
<p>Connect to the tunnel you created.</p>
<ul>
<li>Tunnel Broker helps a lot in connect the tunnel they host with your specific platform.</li>
<li>In &lsquo;Example Configurations&rsquo; tab, you can select your OS.</li>
<li>Ensure to read all the tips/NOTEs below the configuration. (You may need sudo to run the command)</li>
<li><strong>IMPORTANT:</strong> If you&rsquo;re inside an NAT or router, you need to change the &lsquo;PUBLIC-IP&rsquo; in the commands to your own inner IP address.</li>
</ul>
</li>
<li>
<p>After steps above, you&rsquo;ve created a network interface named <code>gif0</code>.</p>
<ul>
<li>You can shut down this tunnel by <code>sudo ifconfig gif0 down</code> or open it with <code>sudo ifconfig gif0 up</code>.</li>
</ul>
</li>
<li>
<p>Now you have the tunnel. And you still need to update your DNS server to resolve your domain names to IPv6 addresses.</p>
<ul>
<li>Use Google IPv4 DNS: 8.8.8.8 (google-public-dns-a.google.com) &amp; 8.8.4.4 (google-public-dns-b.google.com)</li>
<li>Use Google IPv6 DNS: 2001:4860:4860::8888 &amp; 2001:4860:4860::8844</li>
<li>Use OpenDNS IPv4: 208.67.222.222 (Resolver1.OpenDNS.com), 208.67.220.220 (Resolver2.OpenDNS.com), 208.67.222.220 (Resolver3.OpenDNS.com) &amp; 208.67.220.222 (Resolver4.OpenDNS.com)</li>
<li>Use OpenDNS IPv6: 2620:0:ccc::2 &amp; 2620:0:ccd::2</li>
</ul>
</li>
<li>
<p>You may need to flush your DNS.</p>
<ul>
<li>Windows: <code>ipconfig /flushdns</code></li>
<li>Mac OSX: <code>dscacheutil -flushcache</code></li>
</ul>
</li>
<li>
<p>Test it now!</p>
<ul>
<li><a href="http://www.test-ipv6.com/">test-ipv6.com</a></li>
<li><a href="http://ipv6-test.com/">ipv6-test.com</a></li>
<li><a href="https://ipv6.google.com/">ipv6.google.com</a></li>
</ul>
</li>
</ol>
<h2 id="after-all">After all</h2>
<p>Now you should have the ability to access IPv6. Go surf the Internet with IPv6 then!</p>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2015/connect-ipv6.html</guid>
      </item><item>
        <title>Go Chase Our Dreams, Guys!</title>
        <link>https://seasonsroad.com/post/2015/go-chase-our-dreams.html</link>
        <pubDate>Sun, 27 Sep 2015 00:00:00 +0800</pubDate>
        <description><![CDATA[<p>We had fun together. We learned things together. We made it together.</p>
<p>We&rsquo;re boys. We&rsquo;re friends. And we&rsquo;re dreamers.</p>
<p>More action, less words.
So guys, let&rsquo;s move fast and chase our dreams!</p>
<center><p><img src="/post/2015/go-chase-our-dreams/01.jpg" alt="1325" style="width: 580px;"/></p></center>]]></description>
        <guid isPermaLink="true">https://seasonsroad.com/post/2015/go-chase-our-dreams.html</guid>
      </item>
  </channel>
</rss>
